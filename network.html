<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Сборником команд и задач (UnixToolbox)"><meta name=author content="Dmitriy Prigoda"><link rel=canonical href=https://D34m0nN0n3.github.io/unixtoolbox/network.html><link rel=prev href=file_system.html><link rel=next href=ssh_scp.html><link rel=icon href=assets/img/favicon/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.41"><title>Сеть - UnixToolbox</title><link rel=stylesheet href=assets/stylesheets/main.0253249f.min.css><link rel=stylesheet href=assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=assets/extra.css><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-BT11X31T69"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-BT11X31T69",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-BT11X31T69",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=red> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#4-сеть class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=index.html title=UnixToolbox class="md-header__button md-logo" aria-label=UnixToolbox data-md-component=logo> <img src=assets/img/logo/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> UnixToolbox </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Сеть </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/D34m0nN0n3/unixtoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> D34m0nN0n3/unixtoolbox </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title=UnixToolbox class="md-nav__button md-logo" aria-label=UnixToolbox data-md-component=logo> <img src=assets/img/logo/logo.svg alt=logo> </a> UnixToolbox </label> <div class=md-nav__source> <a href=https://github.com/D34m0nN0n3/unixtoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> D34m0nN0n3/unixtoolbox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=index.html class=md-nav__link> <span class=md-ellipsis> Введение </span> </a> </li> <li class=md-nav__item> <a href=system.html class=md-nav__link> <span class=md-ellipsis> Система </span> </a> </li> <li class=md-nav__item> <a href=processes.html class=md-nav__link> <span class=md-ellipsis> Процессы </span> </a> </li> <li class=md-nav__item> <a href=file_system.html class=md-nav__link> <span class=md-ellipsis> Файловая система </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Сеть </span> <span class="md-nav__icon md-icon"></span> </label> <a href=network.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Сеть </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#4-сеть class=md-nav__link> <span class=md-ellipsis> 4 Сеть </span> </a> <nav class=md-nav aria-label="4 Сеть"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#41-диагностика class=md-nav__link> <span class=md-ellipsis> 4.1 Диагностика </span> </a> <nav class=md-nav aria-label="4.1 Диагностика"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#другие-ос class=md-nav__link> <span class=md-ellipsis> Другие ОС </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#42-маршрутизация class=md-nav__link> <span class=md-ellipsis> 4.2 Маршрутизация </span> </a> <nav class=md-nav aria-label="4.2 Маршрутизация"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#freebsd class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=#linux_1 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#solaris class=md-nav__link> <span class=md-ellipsis> Solaris </span> </a> </li> <li class=md-nav__item> <a href=#windows class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#43-настройка-дополнительных-ip-адресов class=md-nav__link> <span class=md-ellipsis> 4.3 Настройка дополнительных IP-адресов </span> </a> <nav class=md-nav aria-label="4.3 Настройка дополнительных IP-адресов"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_2 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#freebsd_1 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=#solaris_1 class=md-nav__link> <span class=md-ellipsis> Solaris </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#44-изменение-mac-адреса class=md-nav__link> <span class=md-ellipsis> 4.4 Изменение MAC-адреса </span> </a> </li> <li class=md-nav__item> <a href=#45-используемые-порты class=md-nav__link> <span class=md-ellipsis> 4.5 Используемые порты </span> </a> </li> <li class=md-nav__item> <a href=#46-брандмауэр class=md-nav__link> <span class=md-ellipsis> 4.6 Брандмауэр </span> </a> <nav class=md-nav aria-label="4.6 Брандмауэр"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_3 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#freebsd_2 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#47-ip-forward-для-маршрутизации class=md-nav__link> <span class=md-ellipsis> 4.7 IP Forward для маршрутизации </span> </a> <nav class=md-nav aria-label="4.7 IP Forward для маршрутизации"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_4 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#freebsd_3 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=#solaris_2 class=md-nav__link> <span class=md-ellipsis> Solaris </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#48-nat-network-address-translation class=md-nav__link> <span class=md-ellipsis> 4.8 NAT (Network Address Translation) </span> </a> <nav class=md-nav aria-label="4.8 NAT (Network Address Translation)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_5 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#freebsd_4 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#49-dns class=md-nav__link> <span class=md-ellipsis> 4.9 DNS </span> </a> <nav class=md-nav aria-label="4.9 DNS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#windows_1 class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> <li class=md-nav__item> <a href=#очистка-dns-кэша class=md-nav__link> <span class=md-ellipsis> Очистка DNS-кэша </span> </a> </li> <li class=md-nav__item> <a href=#перенаправление-запросов class=md-nav__link> <span class=md-ellipsis> Перенаправление запросов </span> </a> </li> <li class=md-nav__item> <a href=#обратные-запросы class=md-nav__link> <span class=md-ellipsis> Обратные запросы </span> </a> </li> <li class=md-nav__item> <a href=#etchosts class=md-nav__link> <span class=md-ellipsis> /etc/hosts </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#410-dhcp class=md-nav__link> <span class=md-ellipsis> 4.10 DHCP </span> </a> <nav class=md-nav aria-label="4.10 DHCP"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_6 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#windows_2 class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#411-анализ-трафика class=md-nav__link> <span class=md-ellipsis> 4.11 Анализ трафика </span> </a> <nav class=md-nav aria-label="4.11 Анализ трафика"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#перехватывайте-с-помощью-tcpdump class=md-nav__link> <span class=md-ellipsis> Перехватывайте с помощью tcpdump </span> </a> </li> <li class=md-nav__item> <a href=#сканирование-с-помощью-nmap class=md-nav__link> <span class=md-ellipsis> Сканирование с помощью nmap </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#412-управление-трафиком-qos class=md-nav__link> <span class=md-ellipsis> 4.12 Управление трафиком (QoS) </span> </a> <nav class=md-nav aria-label="4.12 Управление трафиком (QoS)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ограничение-загрузки class=md-nav__link> <span class=md-ellipsis> Ограничение загрузки </span> </a> <nav class=md-nav aria-label="Ограничение загрузки"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_7 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#freebsd_5 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#качество-обслуживания class=md-nav__link> <span class=md-ellipsis> Качество обслуживания </span> </a> <nav class=md-nav aria-label="Качество обслуживания"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_8 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#freebsd_6 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#413-отладка-nis class=md-nav__link> <span class=md-ellipsis> 4.13 Отладка NIS </span> </a> <nav class=md-nav aria-label="4.13 Отладка NIS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_9 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#414-netcat class=md-nav__link> <span class=md-ellipsis> 4.14 Netcat </span> </a> <nav class=md-nav aria-label="4.14 Netcat"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#передача-файлов class=md-nav__link> <span class=md-ellipsis> Передача файлов </span> </a> </li> <li class=md-nav__item> <a href=#другие-возможности class=md-nav__link> <span class=md-ellipsis> Другие возможности </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#415-curl class=md-nav__link> <span class=md-ellipsis> 4.15 cURL </span> </a> <nav class=md-nav aria-label="4.15 cURL"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#простое-использование class=md-nav__link> <span class=md-ellipsis> Простое использование </span> </a> </li> <li class=md-nav__item> <a href=#использование-паролей class=md-nav__link> <span class=md-ellipsis> Использование паролей </span> </a> </li> <li class=md-nav__item> <a href=#прокси class=md-nav__link> <span class=md-ellipsis> Прокси </span> </a> </li> <li class=md-nav__item> <a href=#диапазоны class=md-nav__link> <span class=md-ellipsis> Диапазоны </span> </a> </li> <li class=md-nav__item> <a href=#загрузка class=md-nav__link> <span class=md-ellipsis> Загрузка </span> </a> </li> <li class=md-nav__item> <a href=#отладка class=md-nav__link> <span class=md-ellipsis> Отладка </span> </a> </li> <li class=md-nav__item> <a href=#возобновление-передачи-файлов-и-временные-условия class=md-nav__link> <span class=md-ellipsis> Возобновление передачи файлов и временные условия </span> </a> </li> <li class=md-nav__item> <a href=#telnet class=md-nav__link> <span class=md-ellipsis> Telnet </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#416-http-status-codes class=md-nav__link> <span class=md-ellipsis> 4.16 HTTP Status Codes </span> </a> <nav class=md-nav aria-label="4.16 HTTP Status Codes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#что-такое-коды-статуса-и-почему-они-важны class=md-nav__link> <span class=md-ellipsis> Что такое коды статуса и почему они важны? </span> </a> <nav class=md-nav aria-label="Что такое коды статуса и почему они важны?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#информационные-ответы class=md-nav__link> <span class=md-ellipsis> Информационные ответы </span> </a> </li> <li class=md-nav__item> <a href=#информационные-ответы_1 class=md-nav__link> <span class=md-ellipsis> Информационные ответы </span> </a> </li> <li class=md-nav__item> <a href=#успешные-ответы class=md-nav__link> <span class=md-ellipsis> Успешные ответы </span> </a> </li> <li class=md-nav__item> <a href=#сообщения-о-перенаправлении class=md-nav__link> <span class=md-ellipsis> Сообщения о перенаправлении </span> </a> </li> <li class=md-nav__item> <a href=#ошибка-клиента class=md-nav__link> <span class=md-ellipsis> Ошибка клиента </span> </a> </li> <li class=md-nav__item> <a href=#ошибка-сервера class=md-nav__link> <span class=md-ellipsis> Ошибка сервера </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=ssh_scp.html class=md-nav__link> <span class=md-ellipsis> SSH SCP </span> </a> </li> <li class=md-nav__item> <a href=vpn_with_ssh.html class=md-nav__link> <span class=md-ellipsis> VPN </span> </a> </li> <li class=md-nav__item> <a href=rsync.html class=md-nav__link> <span class=md-ellipsis> RSYNC </span> </a> </li> <li class=md-nav__item> <a href=sudo.html class=md-nav__link> <span class=md-ellipsis> SUDO </span> </a> </li> <li class=md-nav__item> <a href=encrypt_files.html class=md-nav__link> <span class=md-ellipsis> Шифрование файлов </span> </a> </li> <li class=md-nav__item> <a href=encrypt_partitions.html class=md-nav__link> <span class=md-ellipsis> Шифрование разделов </span> </a> </li> <li class=md-nav__item> <a href=ssl_certificates.html class=md-nav__link> <span class=md-ellipsis> Сертификаты SSL </span> </a> </li> <li class=md-nav__item> <a href=cvs.html class=md-nav__link> <span class=md-ellipsis> CVS </span> </a> </li> <li class=md-nav__item> <a href=svn.html class=md-nav__link> <span class=md-ellipsis> SVN </span> </a> </li> <li class=md-nav__item> <a href=git.html class=md-nav__link> <span class=md-ellipsis> GIT </span> </a> </li> <li class=md-nav__item> <a href=useful_commands.html class=md-nav__link> <span class=md-ellipsis> Полезные команды </span> </a> </li> <li class=md-nav__item> <a href=install_software.html class=md-nav__link> <span class=md-ellipsis> Установка программного обеспечения </span> </a> </li> <li class=md-nav__item> <a href=convert_media.html class=md-nav__link> <span class=md-ellipsis> Конвертирование медиафайлов </span> </a> </li> <li class=md-nav__item> <a href=printing.html class=md-nav__link> <span class=md-ellipsis> Печать </span> </a> </li> <li class=md-nav__item> <a href=database.html class=md-nav__link> <span class=md-ellipsis> Базы данных </span> </a> </li> <li class=md-nav__item> <a href=disk_quota.html class=md-nav__link> <span class=md-ellipsis> Квотирование диска </span> </a> </li> <li class=md-nav__item> <a href=shells.html class=md-nav__link> <span class=md-ellipsis> Терминальные оболочки </span> </a> </li> <li class=md-nav__item> <a href=scripting.html class=md-nav__link> <span class=md-ellipsis> Создание скриптов </span> </a> </li> <li class=md-nav__item> <a href=programming.html class=md-nav__link> <span class=md-ellipsis> Программирование </span> </a> </li> <li class=md-nav__item> <a href=configuration_management.html class=md-nav__link> <span class=md-ellipsis> Управление конфигурациями </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Сеть</h1> <h2 id=4-сеть>4 Сеть<a class=headerlink href=#4-сеть title="Permanent link">&para;</a></h2> <div class="admonition abstract"> <p><a href=#41-диагностика>Диагностика</a> | <a href=#42-маршрутизация>Маршрутизация</a> | <a href=#43-настройка-дополнительных-ip-адресов>Дополнительные IP</a> | <a href=#44-изменение-mac-адреса>Изменение MAC-адреса</a> | <a href=#45-используемые-порты>Порты</a> | <a href=#46-брандмауэр>Брандмауэр</a> | <a href=#47-ip-forward-для-маршрутизации>IP-перенаправление</a> | <a href=#48-nat-network-address-translation>NAT</a> | <a href=#49-dns>DNS</a> | <a href=#410-dhcp>DHCP</a> | <a href=#411-анализ-трафика>Трафик</a> | <a href=#412-управление-трафиком-qos>QoS</a> | <a href=#413-отладка-nis>NIS</a> | <a href=#414-netcat>Netcat</a> | <a href=#415-curl>cURL</a> | <a href=#416-http-status-codes>HTTP Status Codes</a></p> </div> <p>Отладка (см. также анализ трафика)</p> <h3 id=41-диагностика>4.1 Диагностика<a class=headerlink href=#41-диагностика title="Permanent link">&para;</a></h3> <h4 id=linux>Linux<a class=headerlink href=#linux title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># ethtool eth0</strong> - Показать статус Ethernet (заменяет mii-diag)<br> <strong># ethtool -s eth0 speed 100 duplex full</strong> - Принудительно установить 100 Мбит/с полнодуплексный режим<br> <strong># ethtool -s eth0 autoneg off</strong> - Отключить автоматическую настройку<br> <strong># ethtool -p eth1</strong> - Мигать светодиодом Ethernet - очень полезно, если поддерживается<br> <strong># ip link show</strong> - Отобразить все интерфейсы в Linux (аналогично ifconfig)<br> <strong># ip link set eth0 up</strong> - Включить устройство (или выключить). То же самое, что "ifconfig eth0 up"<br> <strong># ip addr show</strong> - Отобразить все IP-адреса в Linux (аналогично ifconfig)<br> <strong># ip neigh show</strong> - Аналогично arp -a </p> </div> <h4 id=другие-ос>Другие ОС<a class=headerlink href=#другие-ос title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># ifconfig fxp0</strong> - Проверить поле "media" в FreeBSD<br> <strong># arp -a</strong> - Проверить запись ARP маршрутизатора (или хоста) (все ОС)<br> <strong># ping example.com</strong> - Первое, что нужно попробовать...<br> <strong># traceroute example.com</strong> - Вывести путь маршрута до пункта назначения<br> <strong># ifconfig fxp0 media 100baseTX mediaopt full-duplex</strong> - 100 Мбит/с полнодуплексный режим (FreeBSD)<br> <strong># netstat -s</strong> - Системная статистика для каждого сетевого протокола </p> </div> <p>Дополнительные команды, которые не всегда устанавливаются по умолчанию, но легко находятся:</p> <div class="admonition example"> <p><strong># arping 192.168.16.254</strong> - Пинг на уровне Ethernet<br> <strong># tcptraceroute -f 5 example.com</strong> - Использует TCP вместо ICMP для трассировки через брандмауэры </p> </div> <div class="admonition error"> <p class=admonition-title>Обнаружение коллизий в сети</p> <p>Для обнаружения одного IP адреса на разных хостах необходимо выполнить <code>arping</code> с любого узла из той же сети:<br> <strong># arping -I &lt;имя интерфейса&gt; -c 4 &lt;конфликтующий IP адрес&gt;</strong><br> Если IP адрес принадлежит нескольким устройства, то в ответе будут содержаться MAC адреса этих устройств.</p> </div> <h3 id=42-маршрутизация>4.2 Маршрутизация<a class=headerlink href=#42-маршрутизация title="Permanent link">&para;</a></h3> <p>Вывод таблицы маршрутизации</p> <div class="admonition example"> <p><strong># route -n</strong> - Linux или используйте "ip route"<br> <strong># netstat -rn</strong> - Linux, BSD и UNIX<br> <strong># route print</strong> - Windows </p> </div> <p>Добавление и удаление маршрута</p> <h4 id=freebsd>FreeBSD<a class=headerlink href=#freebsd title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># route add 212.117.0.0/16 192.168.1.1</strong><br> <strong># route delete 212.117.0.0/16</strong><br> <strong># route add default 192.168.1.1</strong> </p> </div> <div class="admonition note"> <p class=admonition-title>Добавление маршрута постоянно в /etc/rc.conf</p> <p><em>static_routes="myroute"</em><br> *route_myroute="-net 212.117.0.0/16 192.168.1.1" * </p> </div> <h4 id=linux_1>Linux<a class=headerlink href=#linux_1 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># route add -net 192.168.20.0 netmask 255.255.255.0 gw 192.168.16.254</strong><br> <strong># ip route add 192.168.20.0/24 via 192.168.16.254</strong> - то же самое с использованием ip route<br> <strong># route add -net 192.168.20.0 netmask 255.255.255.0 dev eth0</strong><br> <strong># route add default gw 192.168.51.254</strong><br> <strong># ip route add default via 192.168.51.254 dev eth0</strong> - то же самое с использованием ip route<br> <strong># route delete -net 192.168.20.0 netmask 255.255.255.0</strong> </p> </div> <h4 id=solaris>Solaris<a class=headerlink href=#solaris title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># route add -net 192.168.20.0 -netmask 255.255.255.0 192.168.16.254</strong><br> <strong># route add default 192.168.51.254 1</strong> - 1 = количество прыжков до следующего шлюза<br> <strong># route change default 192.168.50.254 1</strong> </p> </div> <p>Постоянные записи устанавливаются в файле <code>/etc/defaultrouter</code>.</p> <h4 id=windows>Windows<a class=headerlink href=#windows title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># Route add 192.168.50.0 mask 255.255.255.0 192.168.51.253</strong><br> <strong># Route add 0.0.0.0 mask 0.0.0.0 192.168.51.254</strong> </p> </div> <p>Используйте add -p, чтобы сделать маршрут постоянным.</p> <h3 id=43-настройка-дополнительных-ip-адресов>4.3 Настройка дополнительных IP-адресов<a class=headerlink href=#43-настройка-дополнительных-ip-адресов title="Permanent link">&para;</a></h3> <h4 id=linux_2>Linux<a class=headerlink href=#linux_2 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># ifconfig eth0 192.168.50.254 netmask 255.255.255.0</strong> - Первый IP<br> <strong># ifconfig eth0:0 192.168.51.254 netmask 255.255.255.0</strong> - Второй IP<br> <strong># ip addr add 192.168.50.254/24 dev eth0</strong> - Эквивалентные команды ip<br> <strong># ip addr add 192.168.51.254/24 dev eth0 label eth0:1</strong> </p> </div> <h4 id=freebsd_1>FreeBSD<a class=headerlink href=#freebsd_1 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># ifconfig fxp0 inet 192.168.50.254/24</strong> - Первый IP<br> <strong># ifconfig fxp0 alias 192.168.51.254 netmask 255.255.255.0</strong> - Второй IP<br> <strong># ifconfig fxp0 -alias 192.168.51.254</strong> - Удалить второй IP-алиас </p> </div> <div class="admonition note"> <p class=admonition-title>Постоянные записи в файле <code>/etc/rc.conf</code></p> <p><em>ifconfig_fxp0="inet 192.168.50.254 netmask 255.255.255.0"</em><br> <em>ifconfig_fxp0_alias0="192.168.51.254 netmask 255.255.255.0"</em> </p> </div> <h4 id=solaris_1>Solaris<a class=headerlink href=#solaris_1 title="Permanent link">&para;</a></h4> <p>Проверить настройки с помощью команды <code>ifconfig -a</code></p> <div class="admonition example"> <p><strong># ifconfig hme0 plumb</strong> - Включить сетевую карту <strong># ifconfig hme0 192.168.50.254 netmask 255.255.255.0 up</strong> - Первый IP <strong># ifconfig hme0:1 192.168.51.254 netmask 255.255.255.0 up</strong> - Второй IP</p> </div> <h3 id=44-изменение-mac-адреса>4.4 Изменение MAC-адреса<a class=headerlink href=#44-изменение-mac-адреса title="Permanent link">&para;</a></h3> <p>Обычно перед изменением MAC-адреса необходимо выключить интерфейс. Не говорите мне, зачем вам нужно изменить MAC-адрес...</p> <div class="admonition example"> <p><strong># ifconfig eth0 down</strong><br> <strong># ifconfig eth0 hw ether 00:01:02:03:04:05</strong> - Linux<br> <strong># ifconfig fxp0 link 00:01:02:03:04:05</strong> - FreeBSD<br> <strong># ifconfig hme0 ether 00:01:02:03:04:05</strong> - Solaris<br> <strong># sudo ifconfig en0 ether 00:01:02:03:04:05</strong> - OS X Tiger, Snow Leopard LAN*<br> <strong># sudo ifconfig en0 lladdr 00:01:02:03:04:05</strong> - OS X Leopard </p> </div> <p>*Обычный беспроводной интерфейс - <code>en1</code> и перед изменением MAC-адреса необходимо отключиться от любой сети (инструкция osxdaily).</p> <div class="admonition example"> <p><strong># echo "alias airport='/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport'"\</strong><br> <strong>&gt;&gt; ~/.bash_profile</strong> # или создайте символическую ссылку на /usr/sbin<br> <strong># airport -z</strong> # Отключиться от беспроводных сетей<br> <strong># airport -I</strong> # Получить информацию о беспроводной сети </p> </div> <p>Для Windows существует множество инструментов. Например, <a href=http://ntsecurity.nu/toolbox/etherchange>etherchange</a>. Или ищите "Mac Makeup", "smac".</p> <h3 id=45-используемые-порты>4.5 Используемые порты<a class=headerlink href=#45-используемые-порты title="Permanent link">&para;</a></h3> <p>Слушающие открытые порты:</p> <div class="admonition example"> <p><strong># netstat -an | grep LISTEN</strong><br> <strong># lsof -i</strong> - Показать все интернет-соединения в Linux<br> <strong># socklist</strong> - Отобразить список открытых сокетов в Linux<br> <strong># sockstat -4</strong> - Список приложений FreeBSD<br> <strong># netstat -anp --udp --tcp | grep LISTEN</strong> - Linux<br> <strong># netstat -tup</strong> - Список активных соединений в/из системы (Linux)<br> <strong># netstat -tupl</strong> - Список прослушиваемых портов в системе (Linux)<br> <strong># netstat -ano</strong> - Windows </p> </div> <h3 id=46-брандмауэр>4.6 Брандмауэр<a class=headerlink href=#46-брандмауэр title="Permanent link">&para;</a></h3> <p>Проверка работы брандмауэра (обычная конфигурация):</p> <h4 id=linux_3>Linux<a class=headerlink href=#linux_3 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># iptables -L -n -v</strong> - Состояние<br> Открыть брандмауэр iptables<br> <strong># iptables -P INPUT ACCEPT</strong> - Открыть все<br> <strong># iptables -P FORWARD ACCEPT</strong><br> <strong># iptables -P OUTPUT ACCEPT</strong><br> <strong># iptables -Z</strong> - Обнулить счетчики пакетов и байтов во всех цепочках<br> <strong># iptables -F</strong> - Очистить все цепочки<br> <strong># iptables -X</strong> - Удалить все цепочки </p> </div> <h4 id=freebsd_2>FreeBSD<a class=headerlink href=#freebsd_2 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># ipfw show</strong> - Состояние<br> <strong># ipfw list 65535</strong> - если ответ "65535 deny ip from any to any", то брандмауэр отключен<br> <strong># sysctl net.inet.ip.fw.enable=0</strong> - Отключить<br> <strong># sysctl net.inet.ip.fw.enable=1</strong> - Включить </p> </div> <h3 id=47-ip-forward-для-маршрутизации>4.7 IP Forward для маршрутизации<a class=headerlink href=#47-ip-forward-для-маршрутизации title="Permanent link">&para;</a></h3> <h4 id=linux_4>Linux<a class=headerlink href=#linux_4 title="Permanent link">&para;</a></h4> <p>Проверить и затем включить IP Forward:</p> <div class="admonition example"> <p><strong># cat /proc/sys/net/ipv4/ip_forward</strong> # Проверить IP Forward (0=выключено, 1=включено)<br> <strong># echo 1 &gt; /proc/sys/net/ipv4/ip_forward</strong> </p> </div> <div class="admonition note"> <p class=admonition-title>или отредактировать <code>/etc/sysctl.conf</code>:</p> <p><em>net.ipv4.ip_forward = 1</em></p> </div> <h4 id=freebsd_3>FreeBSD<a class=headerlink href=#freebsd_3 title="Permanent link">&para;</a></h4> <p>Проверить и включить:</p> <div class="admonition example"> <p><strong># sysctl net.inet.ip.forwarding</strong> - Проверить IP Forward (0=выключено, 1=включено)<br> <strong># sysctl net.inet.ip.forwarding=1</strong><br> <strong># sysctl net.inet.ip.fastforwarding=1</strong> - Для выделенного маршрутизатора или брандмауэра </p> </div> <div class="admonition note"> <p class=admonition-title>Постоянное включение с помощью записи в <code>/etc/rc.conf</code>:</p> <p><em>gateway_enable="YES"</em> - Установить YES, если этот хост будет шлюзом.</p> </div> <h4 id=solaris_2>Solaris<a class=headerlink href=#solaris_2 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># ndd -set /dev/ip ip_forwarding 1</strong> - Установить IP Forward (0=выключено, 1=включено)</p> </div> <h3 id=48-nat-network-address-translation>4.8 NAT (Network Address Translation)<a class=headerlink href=#48-nat-network-address-translation title="Permanent link">&para;</a></h3> <h4 id=linux_5>Linux<a class=headerlink href=#linux_5 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</strong> - Активация NAT<br> <strong># iptables -t nat -A PREROUTING -p tcp -d 78.31.70.238 --dport 20022 -j DNAT \</strong><br> <strong>--to 192.168.16.44:22</strong> - Перенаправление порта 20022 на внутренний IP-адрес и порт SSH<br> <strong># iptables -t nat -A PREROUTING -p tcp -d 78.31.70.238 --dport 993:995 -j DNAT \</strong><br> <strong>--to 192.168.16.254:993-995</strong> - Перенаправление диапазона портов 993-995<br> <strong># ip route flush cache</strong><br> <strong># iptables -L -t nat</strong> - Проверить состояние NAT </p> </div> <p>Удалите пересылку портов с помощью <code>-D</code> вместо <code>-А</code>. Программа <a href=http://tweegy.nl/projects/netstat-nat>netstat-nat</a> очень полезна для отслеживания соединений (она использует <code>/proc/net/ip_conntrack</code> или <code>/proc/net/nf_conntrack</code>).</p> <div class="admonition example"> <p><strong># netstat-nat -n</strong> - показать все соединения с IP-адресами</p> </div> <h4 id=freebsd_4>FreeBSD<a class=headerlink href=#freebsd_4 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># natd -s -m -u -dynamic -f /etc/natd.conf -n fxp0</strong></p> </div> <div class="admonition note"> <p class=admonition-title>Или измените файл <code>/etc/rc.conf</code> следующим образом:</p> <p><strong>firewall_enable="YES"</strong> - Установите YES для включения функциональности брандмауэра<br> <strong>firewall_type="open"</strong> - Тип брандмауэра (см. <code>/etc/rc.firewall</code>)<br> <strong>natd_enable="YES"</strong> - Включить natd (если firewall_enable == YES)<br> <strong>natd_interface="tun0"</strong> - Общедоступный интерфейс или IP-адрес для использования<br> <strong>natd_flags="-s -m -u -dynamic -f /etc/natd.conf"</strong> </p> </div> <p>Перенаправление порта:</p> <div class="admonition example"> <p class=admonition-title>cat /etc/natd.conf</p> <p>same_ports yes<br> use_sockets yes<br> unregistered_only </p> </div> <div class="admonition example"> <p><strong># redirect_port tcp insideIP:2300-2399 3300-3399</strong> - диапазон портов<br> <strong># redirect_port udp 192.168.51.103:7777 7777</strong> </p> </div> <h3 id=49-dns>4.9 DNS<a class=headerlink href=#49-dns title="Permanent link">&para;</a></h3> <p>В Unix записи DNS являются действительными для всех интерфейсов и хранятся в <code>/etc/resolv.conf</code>. Домен, к которому принадлежит хост, также хранится в этом файле. Минимальная конфигурация выглядит следующим образом:</p> <div class="admonition note"> <p><em>nameserver 78.31.70.238</em><br> <em>search sleepyowl.net intern.lab</em><br> <em>domain sleepyowl.net</em> </p> </div> <p>Проверьте системное доменное имя с помощью команды:</p> <div class="admonition example"> <p><strong># hostname -d</strong> - То же самое, что и dnsdomainname</p> </div> <h4 id=windows_1>Windows<a class=headerlink href=#windows_1 title="Permanent link">&para;</a></h4> <p>В Windows DNS настраивается для каждого интерфейса. Чтобы отобразить настроенные DNS-серверы и очистить кэш DNS, используйте:</p> <div class="admonition example"> <p><strong># ipconfig /?</strong> - Вывести справку<br> <strong># ipconfig /all</strong> - Показать всю информацию, включая DNS </p> </div> <h4 id=очистка-dns-кэша>Очистка DNS-кэша<a class=headerlink href=#очистка-dns-кэша title="Permanent link">&para;</a></h4> <p>Очистите кэш DNS операционной системы; некоторые приложения используют свой собственный кэш (например, Firefox) и не будут затронуты.</p> <div class="admonition example"> <p><strong># systemctl restart nscd.service</strong> - Перезапустить nscd, если используется - Linux<br> <strong># /etc/init.d/nscd restart</strong> - Перезапустить nscd, если используется - Linux/BSD/Solaris<br> <strong># lookupd -flushcache</strong> - OS X Tiger<br> <strong># dscacheutil -flushcache</strong> - OS X Leopard и новее<br> <strong># ipconfig /flushdns</strong> - Windows </p> </div> <h4 id=перенаправление-запросов>Перенаправление запросов<a class=headerlink href=#перенаправление-запросов title="Permanent link">&para;</a></h4> <p>Используйте команду <code>dig</code> для тестирования настроек DNS. Например, для тестирования можно использовать публичный DNS-сервер <code>213.133.105.2 ns.second-ns.de</code>. Просмотрите, с какого сервера клиент получает ответ (упрощенный ответ).</p> <div class="admonition example"> <p><strong># dig sleepyowl.net</strong><br> <em>sleepyowl.net. 600 IN A 78.31.70.238</em><br> <em>;; SERVER: <a class="magiclink magiclink-github magiclink-issue" href=https://github.com/squidfunk/192.168.51.254/issues/53 title="GitHub Issue: squidfunk/192.168.51.254 #53">192.168.51.254#53</a>(192.168.51.254)</em> </p> </div> <p>Ответил маршрутизатор <code>192.168.51.254</code>, и ответом является запись <code>A</code>. Любую запись можно запросить, выбрав DNS-сервер с помощью <code>@</code>:</p> <div class="admonition example"> <p><strong># dig MX google.com</strong><br> <strong># dig <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/127 title="GitHub User: 127">@127</a>.0.0.1 NS sun.com</strong> - Для тестирования локального сервера<br> <strong># dig <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/204 title="GitHub User: 204">@204</a>.97.212.10 NS MX heise.de</strong> - Запросить внешний сервер<br> <strong># dig AXFR <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/ns1 title="GitHub User: ns1">@ns1</a>.xname.org example.com</strong> - Получить полную зону (зоновой трансфер) </p> </div> <p>Программа <code>host</code> также мощная.</p> <div class="admonition example"> <p><strong># host -t MX example.com</strong> - Получить запись MX для электронной почты<br> <strong># host -t NS -T sun.com</strong> - Получить запись NS через TCP-соединение<br> <strong># host -a sleepyowl.net</strong> - Получить все данные </p> </div> <h4 id=обратные-запросы>Обратные запросы<a class=headerlink href=#обратные-запросы title="Permanent link">&para;</a></h4> <p>Найти имя, соответствующее IP-адресу (<code>in-addr.arpa.</code>). Это можно сделать с помощью <code>dig</code>, <code>host</code> и <code>nslookup</code>:</p> <div class="admonition example"> <p><strong># dig -x 78.31.70.238</strong><br> <strong># host 78.31.70.238</strong><br> <strong># nslookup 78.31.70.238</strong> </p> </div> <h4 id=etchosts>/etc/hosts<a class=headerlink href=#etchosts title="Permanent link">&para;</a></h4> <div class="admonition note"> <p class=admonition-title>Отдельные хосты можно настроить в файле <code>/etc/hosts</code> вместо локального запуска <code>named</code> для разрешения запросов имени хоста. Формат простой, например:</p> <p><em>78.31.70.238 sleepyowl.net sleepyowl</em></p> </div> <div class="admonition note"> <p class=admonition-title>Приоритет между хостами и DNS-запросом, то есть порядок разрешения имен, можно настроить в <code>/etc/nsswitch.conf</code> И <code>/etc/host.conf</code>. Файл также существует в Windows, обычно он находится в:</p> <p>C:\WINDOWS\SYSTEM32\DRIVERS\ETC</p> </div> <h3 id=410-dhcp>4.10 DHCP<a class=headerlink href=#410-dhcp title="Permanent link">&para;</a></h3> <h4 id=linux_6>Linux<a class=headerlink href=#linux_6 title="Permanent link">&para;</a></h4> <p>Некоторые дистрибутивы (SuSE) используют <code>dhcpcd</code> в качестве клиента. Интерфейс по умолчанию — <code>eth0</code>.</p> <div class="admonition example"> <p><strong># dhcpcd -n eth0</strong> - Инициировать обновление (не всегда работает)<br> <strong># dhcpcd -k eth0</strong> - выпуск и завершение работы </p> </div> <p>Договор аренды с полной информацией хранится в:</p> <div class="admonition info"> <p><em>/var/lib/dhcpcd/dhcpcd-eth0.info</em></p> </div> <h4 id=windows_2>Windows<a class=headerlink href=#windows_2 title="Permanent link">&para;</a></h4> <p>Для обновления аренды DHCP можно воспользоваться командой <code>ipconfig</code>:</p> <div class="admonition example"> <p><strong># ipconfig /renew</strong> - обновить все адаптеры<br> <strong># ipconfig /renew LAN</strong> - обновить адаптер с именем "LAN"<br> <strong># ipconfig /release WLAN</strong> - освободить адаптер с именем "WLAN" </p> </div> <p>Да, это хорошая идея переименовать свой адаптер простым именем!</p> <h3 id=411-анализ-трафика>4.11 Анализ трафика<a class=headerlink href=#411-анализ-трафика title="Permanent link">&para;</a></h3> <p><a href=http://people.suug.ch/~tgr/bmon/ >Bmon</a> - это небольшой монитор пропускной способности консоли, который может отображать поток на разных интерфейсах.</p> <h4 id=перехватывайте-с-помощью-tcpdump>Перехватывайте с помощью tcpdump<a class=headerlink href=#перехватывайте-с-помощью-tcpdump title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># tcpdump -nl -i bge0 not port ssh and src \(192.168.16.121 or 192.168.16.54\)</strong><br> <strong># tcpdump -n -i eth1 net 192.168.16.121</strong> - выберите только входящий/исходящий трафик для одного IP-адреса<br> <strong># tcpdump -n -i eth1 net 192.168.16.0/24</strong> - выберите трафик, входящий/исходящий для сети<br> <strong># tcpdump -l &gt; dump &amp;&amp; tail -f dump</strong> - Буферизованный вывод<br> <strong># tcpdump -i rl0 -w traffic.rl0</strong> - Запись заголовков трафика в бинарный файл<br> <strong># tcpdump -i rl0 -s 0 -w traffic.rl0</strong> - Запись трафика и полезных данных в бинарный файл<br> <strong># tcpdump -r traffic.rl0</strong> - Чтение из файла (также для программы Ethereal)<br> <strong># tcpdump port 80</strong> - Два классических команды<br> <strong># tcpdump host google.com</strong><br> <strong># tcpdump -i eth0 -X port <span class=arithmatex>\(110 or 143\)</span></strong> - Проверка безопасности протоколов POP или IMAP<br> <strong># tcpdump -n -i eth0 icmp</strong> - Отлавливать только пинги<br> <strong># tcpdump -i eth0 -s 0 -A port 80 | grep GET</strong> - <code>-s 0</code> для полного пакета <code>-A</code> для ASCII</p> </div> <div class="admonition info"> <p class=admonition-title>Дополнительные важные параметры:</p> <p>-A &nbsp; &nbsp; Выводить каждый пакет в виде текста (без заголовка)<br> -X &nbsp; &nbsp; Выводить пакеты в шестнадцатеричном и ASCII форматах<br> -l &nbsp; &nbsp; Включить буферизацию вывода по строкам<br> -D &nbsp; &nbsp; Вывести список всех доступных интерфейсов </p> </div> <p>На Windows используйте windump с сайта <a href=http://www.winpcap.org>www.winpcap.org</a>. Используйте команду <code>windump -D</code>, чтобы вывести список интерфейсов.</p> <h4 id=сканирование-с-помощью-nmap>Сканирование с помощью nmap<a class=headerlink href=#сканирование-с-помощью-nmap title="Permanent link">&para;</a></h4> <p><a href=http://insecure.org/nmap/ >Nmap</a> - это сканер портов с определением операционной системы, который обычно устанавливается на большинстве дистрибутивов и также доступен для Windows. Если вы не сканируете свои серверы, хакеры делают это за вас...</p> <div class="admonition example"> <p><strong># nmap example.com</strong> - Сканировать все зарезервированные TCP-порты на хосте<br> <strong># nmap -sP 192.168.16.0/24</strong> - Узнать, какие IP-адреса используются и каким хостом находятся в этой подсети<br> <strong># nmap -sS -sV -O example.com</strong> - Сканирование stealth SYN с определением версии и ОС<br> <em>PORT &nbsp; &nbsp; STATE &nbsp; &nbsp; SERVICE &nbsp; &nbsp; &nbsp; &nbsp; VERSION</em><br> <em>22/tcp &nbsp; &nbsp; open &nbsp; &nbsp; &nbsp; &nbsp; ssh &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OpenSSH 3.8.1p1 FreeBSD-20060930 (protocol 2.0)</em><br> <em>25/tcp &nbsp; &nbsp; open &nbsp; &nbsp; &nbsp; &nbsp; smtp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Sendmail smtpd 8.13.6/8.13.6</em><br> <em>80/tcp &nbsp; &nbsp; open &nbsp; &nbsp; &nbsp; &nbsp; http &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Apache httpd 2.0.59 (FreeBSD) DAV/2 PHP/4.</em><br> <em>[...]</em><br> <em>Running: FreeBSD 5.X</em><br> <em>Uptime 33.120 days (since Fri Aug 31 11:41:04 2007)</em> </p> </div> <p>Другие нестандартные, но полезные инструменты - <a href=www.hping.org>hping</a> - сборщик/анализатор пакетов IP и <a href=fping.sourceforge.net>fping</a>. <code>fping</code> может проверять несколько хостов по круговому принципу.</p> <h3 id=412-управление-трафиком-qos>4.12 Управление трафиком (QoS)<a class=headerlink href=#412-управление-трафиком-qos title="Permanent link">&para;</a></h3> <p>Управление трафиком управляет очередью, контролирует скорость, планирует и другие параметры трафика в сети. Вот несколько простых практических примеров использования возможностей Linux и FreeBSD для более эффективного использования доступной пропускной способности.</p> <h4 id=ограничение-загрузки>Ограничение загрузки<a class=headerlink href=#ограничение-загрузки title="Permanent link">&para;</a></h4> <p>DSL или кабельные модемы имеют длинную очередь для повышения пропускной способности загрузки. Однако заполнение очереди быстрым устройством (например, Ethernet) резко снизит интерактивность. Поэтому полезно ограничить скорость загрузки устройства в соответствии с физической емкостью модема, это должно значительно улучшить интерактивность. Установите примерно 90% от максимальной скорости модема (кабель).</p> <h5 id=linux_7>Linux<a class=headerlink href=#linux_7 title="Permanent link">&para;</a></h5> <p>Для модема с загрузкой на передачу данных 512 Кбит.</p> <div class="admonition example"> <p><strong># tc qdisc add dev eth0 root tbf rate 480kbit latency 50ms burst 1540</strong><br> <strong># tc -s qdisc ls dev eth0</strong> - Состояние<br> <strong># tc qdisc del dev eth0 root</strong> - Удалить очередь<br> <strong># tc qdisc change dev eth0 root tbf rate 220kbit latency 50ms burst 1540</strong> </p> </div> <h5 id=freebsd_5>FreeBSD<a class=headerlink href=#freebsd_5 title="Permanent link">&para;</a></h5> <p>FreeBSD использует <code>traffic shaper dummynet</code>, который настраивается с помощью <code>ipfw</code>. Каналы используются для установки ограничений на пропускную способность в единицах <code>[K|M]{bit/s|Byte/s}</code>, <code>0</code> означает неограниченную пропускную способность. Использование того же номера канала переконфигурирует его. Например, ограничить пропускную способность загрузки до 500 Кбит.</p> <div class="admonition example"> <p><strong># kldload dummynet</strong> - загрузить модуль, если необходимо<br> <strong># ipfw pipe 1 config bw 500Kbit/s</strong> - создать канал с ограниченной пропускной способностью<br> <strong># ipfw add pipe 1 ip from me to any</strong> - направить всю загрузку в канал </p> </div> <h4 id=качество-обслуживания>Качество обслуживания<a class=headerlink href=#качество-обслуживания title="Permanent link">&para;</a></h4> <p>QoS (англ. quality of service «качество обслуживания») — технология предоставления различным классам трафика различных приоритетов в обслуживании, также этим термином в области компьютерных сетей называют вероятность того, что сеть связи соответствует заданному соглашению о трафике, или же, в ряде случаев, неформальное обозначение вероятности прохождения пакета между двумя точками сети.</p> <h5 id=linux_8>Linux<a class=headerlink href=#linux_8 title="Permanent link">&para;</a></h5> <p>Приоритетное упорядочение с помощью <code>tc</code> для оптимизации VoIP. См. полный пример на voip-info.org или <a href=http://www.howtoforge.com>www.howtoforge.com</a>. Предположим, что VoIP использует udp на портах 10000:11024 и устройстве eth0 (может быть также ppp0 и т. д.). Следующие команды определяют QoS для трех очередей и принудительно направляют трафик VoIP в очередь 1 с QoS <code>0x1e</code> (все биты установлены). Трафик по умолчанию направляется в очередь 3, а QoS Minimize-Delay направляется в очередь 2.</p> <div class="admonition example"> <p><strong># tc qdisc add dev eth0 root handle 1: prio priomap 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 0</strong><br> <strong># tc qdisc add dev eth0 parent 1:1 handle 10: sfq</strong><br> <strong># tc qdisc add dev eth0 parent 1:2 handle 20: sfq</strong><br> <strong># tc qdisc add dev eth0 parent 1:3 handle 30: sfq</strong><br> <strong># tc filter add dev eth0 protocol ip parent 1: prio 1 u32 \</strong><br> <strong>match ip dport 10000 0x3C00 flowid 1:1</strong> - использовать диапазон портов сервера<br> <strong>match ip dst 123.23.0.1 flowid 1:1</strong> - или/и использовать IP-адрес сервера </p> </div> <p>Статус и удаление с помощью</p> <div class="admonition example"> <p><strong># tc -s qdisc ls dev eth0</strong> - статус очереди<br> <strong># tc qdisc del dev eth0 root</strong> - удалить все QoS </p> </div> <p><strong><em>Расчет диапазона портов и маски</em></strong></p> <p>Фильтр <code>tc</code> определяет диапазон портов с помощью порта и маски, которые необходимо вычислить. Найдите окончание диапазона портов <code>2^N</code>, вычтите из него диапазон и преобразуйте в HEX. Это будет ваша маска. Пример для 10000 -&gt; 11024, диапазон равен 1024.</p> <div class="admonition example"> <p><strong># 2^13 (8192) &lt; 10000 &lt; 2^14 (16384)</strong> - окончание - 2^14 = 16384<br> <strong># echo "obase=16;(2^14)-1024" | bc</strong> - маска - 0x3C00 </p> </div> <h5 id=freebsd_6>FreeBSD<a class=headerlink href=#freebsd_6 title="Permanent link">&para;</a></h5> <p>Максимальная пропускная способность соединения составляет 500 Kбит/с, и мы определяем 3 очереди с приоритетом <code>100:10:1</code> для <code>VoIP:ssh:все</code> остальное.</p> <div class="admonition example"> <p><strong># ipfw pipe 1 config bw 500Kbit/s</strong><br> <strong># ipfw queue 1 config pipe 1 weight 100</strong><br> <strong># ipfw queue 2 config pipe 1 weight 10</strong><br> <strong># ipfw queue 3 config pipe 1 weight 1</strong><br> <strong># ipfw add 10 queue 1 proto udp dst-port 10000-11024</strong><br> <strong># ipfw add 11 queue 1 proto udp dst-ip 123.23.0.1</strong> - или/и использовать IP-адрес сервера<br> <strong># ipfw add 20 queue 2 dsp-port ssh</strong><br> <strong># ipfw add 30 queue 3 from me to any</strong> - все остальное </p> </div> <p>Статус и удаление с помощью</p> <div class="admonition example"> <p><strong># ipfw list</strong> - статус правил<br> <strong># ipfw pipe list</strong> - статус каналов<br> <strong># ipfw flush</strong> - удалить все правила, кроме стандартных </p> </div> <h3 id=413-отладка-nis>4.13 Отладка NIS<a class=headerlink href=#413-отладка-nis title="Permanent link">&para;</a></h3> <p>Некоторые команды, которые должны работать на хорошо настроенном клиенте NIS:</p> <div class="admonition example"> <p><strong># ypwhich</strong> - получить имя подключенного сервера NIS<br> <strong># domainname</strong> - настроенное имя домена NIS<br> <strong># ypcat group</strong> - должен отображать группу с сервера NIS<br> <strong># cd /var/yp &amp;&amp; make</strong> - Перестроить базу данных yp<br> <strong># rpcinfo -p servername</strong> - Отчет о службах RPC сервера </p> </div> <p>Запущен ли ypbind?</p> <div class="admonition example"> <p><strong># ps auxww | grep ypbind</strong><br> <em>/usr/sbin/ypbind -s -m -S servername1,servername2</em> &nbsp; &nbsp; - FreeBSD<br> <em>/usr/sbin/ypbind</em> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - Linux<br> <strong># yppoll passwd.byname</strong><br> <em>Map passwd.byname has order number 1190635041. Mon Sep 24 13:57:21 2007</em><br> <em>The master server is servername.domain.net.</em> </p> </div> <h4 id=linux_9>Linux<a class=headerlink href=#linux_9 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># cat /etc/yp.conf</strong><br> <em>ypserver servername</em><br> <em>domain domain.net broadcast</em> </p> </div> <h3 id=414-netcat>4.14 Netcat<a class=headerlink href=#414-netcat title="Permanent link">&para;</a></h3> <p><a href=http://netcat.sourceforge.net>Netcat</a> (nc) больше известен как "сетевой швейцарский нож", он может манипулировать, создавать или читать/записывать соединения TCP/IP. Вот несколько полезных примеров, их много больше в Интернете, например, <a href=http://www.g-loaded.eu/2006/11/06/netcat-a-couple-of-useful-examples>g-loaded.eu</a> и <a href=http://www.terminally-incoherent.com/blog/2007/08/07/few-useful-netcat-tricks>здесь</a>. Возможно, вам потребуется использовать команду <code>netcat</code> вместо <code>nc</code>. Также см. аналогичную команду <code>socat</code>.</p> <h4 id=передача-файлов>Передача файлов<a class=headerlink href=#передача-файлов title="Permanent link">&para;</a></h4> <p>Скопировать большую папку через неразобранное TCP-соединение. Передача очень быстрая (без накладных расходов протокола), и вам не нужно возиться с <code>NFS</code> или <code>SMB</code> или <code>FTP</code> и т.д., просто сделайте файл доступным на сервере и получите его с клиента. Здесь 192.168.1.1 - это IP-адрес сервера.</p> <div class="admonition example"> <p><em>server -&gt;</em> <strong># tar -cf - -C VIDEO_TS . | nc -l -p 4444</strong> - Сервер предоставляет архивную папку на порту 4444<br> <em>client -&gt;</em> <strong># nc 192.168.1.1 4444 | tar xpf - -C VIDEO_TS</strong> - Получает файл по порту 4444 и распаковывает его в папку VIDEO_TS<br> <em>server -&gt;</em> <strong># cat largefile | nc -l 5678</strong> - Сервер передает одиночный файл<br> <em>client -&gt;</em> <strong># nc 192.168.1.1 5678 &gt; largefile</strong> - Получает одиночный файл<br> <em>server -&gt;</em> <strong># dd if=/dev/da0 | nc -l 4444</strong> - Сервер предоставляет образ раздела<br> <em>client -&gt;</em> <strong># nc 192.168.1.1 4444 | dd of=/dev/da0</strong> - Копирует раздел для клонирования<br> <em>client -&gt;</em> <strong># nc 192.168.1.1 4444 | dd of=da0.img</strong> - Копирует раздел в файл </p> </div> <h4 id=другие-возможности>Другие возможности<a class=headerlink href=#другие-возможности title="Permanent link">&para;</a></h4> <p>Особенно здесь, вы должны знать, что делаете.</p> <p><strong>Удаленная оболочка</strong></p> <p>Опция <code>-e</code> есть только в версии для Windows? Или использовать <code>nc 1.10</code>.</p> <div class="admonition example"> <p><strong># nc -lp 4444 -e /bin/bash</strong> - Предоставляет удаленную оболочку<br> <strong># nc -lp 4444 -e cmd.exe</strong> - Удаленная оболочка для Windows </p> </div> <p><strong>Аварийный веб-сервер</strong></p> <p>Постоянно предоставляет одиночный файл на порту 80.</p> <div class="admonition example"> <p><strong># while true; do nc -l -p 80 &lt; unixtoolbox.xhtml; done</strong></p> </div> <p><strong>Чат</strong></p> <p>Алиса и Боб могут общаться по простому TCP-сокету. Текст передается по нажатию клавиши <code>Enter</code>.</p> <div class="admonition example"> <p><em>alice -&gt;</em> <strong># nc -lp 4444</strong><br> <em>bob -&gt;</em> <strong># nc 192.168.1.1 4444</strong> </p> </div> <h3 id=415-curl>4.15 cURL<a class=headerlink href=#415-curl title="Permanent link">&para;</a></h3> <p><strong>cURL</strong> — (распространяемая по лицензии MIT) кроссплатформенная служебная программа командной строки, позволяющая взаимодействовать с множеством различных серверов по множеству различных протоколов с синтаксисом URL. Название расшифровывается как "client for URL".</p> <h4 id=простое-использование>Простое использование<a class=headerlink href=#простое-использование title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong>curl <a href=https://www.example.com/ >https://www.example.com/</a></strong> - Получить главную страницу с веб-сервера<br> <strong>curl <a href=http://www.weirdserver.com:8000/ >http://www.weirdserver.com:8000/</a></strong> - Получите веб-страницу с сервера, используя порт 8000<br> <strong>curl <a href=ftp://ftp.funet.fi>ftp://ftp.funet.fi</a></strong> - Получите список каталогов FTP-сайта<br> <strong>curl <a href=ftp://ftp.funet.fi/README>ftp://ftp.funet.fi/README</a></strong> - Получите файл README с FTP-сервера<br> <strong>curl --ftp-ssl <a href=ftp://files.are.secure.com/secrets.txt>ftp://files.are.secure.com/secrets.txt</a></strong> - Получить файл с FTPS-сервера<br> <strong>curl <a href=ftp://ftp.funet.fi/ >ftp://ftp.funet.fi/</a> <a href=http://www.weirdserver.com:8000/ >http://www.weirdserver.com:8000/</a></strong> - Получите два документа одновременно<br> <strong>curl -u username sftp://example.com/etc/issue</strong> - Получите файл с SSH-сервера с помощью SFTP<br> <strong>curl -u username: --key ~/.ssh/id_rsa scp://example.com/~/file.txt</strong> - Получите файл с SSH-сервера, используя SCP, используя закрытый ключ (не защищенный паролем) для аутентификации<br> <strong>curl -u username: --key ~/.ssh/id_rsa --pass private_key_password scp://example.com/~/file.txt</strong> - Получите файл с SSH-сервера, используя SCP, используя закрытый ключ (защищенный паролем) для аутентификации<br> <strong>curl -u "domain\username:passwd" smb://server.example.com/share/file.txt</strong> - Получить файл с SMB-сервера </p> </div> <h4 id=использование-паролей>Использование паролей<a class=headerlink href=#использование-паролей title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><em>Curl также поддерживает имя пользователя и пароль в URL-адресах HTTP, поэтому вы можете выбрать такой файл:</em><br> <strong>curl <a href=http://name:passwd@machine.domain/full/path/to/file>http://name:passwd@machine.domain/full/path/to/file</a></strong><br> <em>или укажите пользователя и пароль отдельно с помощью флага <code>-u</code>:</em><br> <strong>curl -u name:passwd <a href=http://machine.domain/full/path/to/file>http://machine.domain/full/path/to/file</a></strong> </p> </div> <div class="admonition help"> <p>HTTP предлагает множество различных методов аутентификации, и Curl поддерживает несколько из них: базовый, дайджест, NTLM и согласование (SPNEGO). Не указывая, какой метод использовать, по умолчанию используется значение <code>Basic</code>. Вы также можете попросить Curl выбрать наиболее безопасные из тех, которые сервер принимает для данного URL-адреса, используя <code>--anyauth</code>.</p> </div> <h4 id=прокси>Прокси<a class=headerlink href=#прокси title="Permanent link">&para;</a></h4> <p>Curl поддерживает прокси-серверы HTTP и SOCKS с дополнительной аутентификацией. Он не имеет специальной поддержки прокси-серверов FTP, поскольку для них не существует стандартов, но его все же можно заставить работать со многими из них. Вы также можете использовать прокси-серверы HTTP и SOCKS для передачи файлов на FTP-серверы и обратно.</p> <div class="admonition example"> <p><strong>curl -x my-proxy:888 <a href=ftp://ftp.leachsite.com/README>ftp://ftp.leachsite.com/README</a></strong> - Получите ftp-файл, используя HTTP-прокси с именем my-proxy, который использует порт 888<br> <strong>curl -u user:passwd -x my-proxy:888 <a href=http://www.get.this/ >http://www.get.this/</a></strong> - Получите файл с HTTP-сервера, для которого требуется имя пользователя и пароль, используя тот же прокси-сервер<br> <strong>curl -U user:passwd -x my-proxy:888 <a href=http://www.get.this/ >http://www.get.this/</a></strong> - Некоторые прокси требуют специальной аутентификации. Укажите, используя <code>-U</code><br> <strong>curl --noproxy localhost,get.this -x my-proxy:888 <a href=http://www.get.this/ >http://www.get.this/</a></strong> - Список хостов и доменов, разделенных запятыми, которые не используют прокси </p> </div> <div class="admonition hint"> <p class=admonition-title>Подсказка</p> <p>Если прокси-сервер указан <code>--proxy1.0</code> вместо <code>--proxy</code> или <code>-x</code>, то для любых попыток Curl будет использовать HTTP/1.0 вместо HTTP/1.1 CONNECT. Curl также поддерживает прокси-серверы SOCKS4 и SOCKS5 с <code>--socks4</code> расширением <code>--socks5</code>.</p> </div> <h4 id=диапазоны>Диапазоны<a class=headerlink href=#диапазоны title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong>curl -r 0-99 <a href=http://www.get.this/ >http://www.get.this/</a></strong> - Получите первые 100 байт документа<br> <strong>curl -r -500 <a href=http://www.get.this/ >http://www.get.this/</a></strong> - Получить последние 500 байт документа </p> </div> <h4 id=загрузка>Загрузка<a class=headerlink href=#загрузка title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong>curl -T - <a href=ftp://ftp.upload.com/myfile>ftp://ftp.upload.com/myfile</a></strong> - Загружает все данные на стандартный ввод на указанный сервер<br> <strong>curl -T uploadfile -u user:passwd <a href=ftp://ftp.upload.com/myfile>ftp://ftp.upload.com/myfile</a></strong> - Загружает данные из указанного файла, войдите под пользователем и паролем<br> <strong>curl -T localfile -a <a href=ftp://ftp.upload.com/remotefile>ftp://ftp.upload.com/remotefile</a></strong> - Загружает локальный файл, чтобы добавить его к удаленному файлу<br> <strong>curl -T file.txt -u "domain\username:passwd" smb://server.example.com/share/</strong> - Загружает данные на шаровый ресурс по SMB </p> </div> <h4 id=отладка>Отладка<a class=headerlink href=#отладка title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong>curl -v <a href=ftp://ftp.upload.com/ >ftp://ftp.upload.com/</a></strong> - Используйте флаг <code>-v</code> чтобы получить подробную выборку<br> <strong>curl --trace trace.txt <a href=http://www.haxx.se>www.haxx.se</a></strong> - Чтобы получить еще больше подробностей и информации о том, что делает Curl, попробуйте использовать параметры <code>--trace</code> или <code>--trace-asciiс</code> заданным именем файла для входа<br> <strong>curl --dump-header headers.txt curl.se</strong> - Сохраните заголовки HTTP в отдельном файле (в примере headers.txt) </p> </div> <h4 id=возобновление-передачи-файлов-и-временные-условия>Возобновление передачи файлов и временные условия<a class=headerlink href=#возобновление-передачи-файлов-и-временные-условия title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong>curl -C - -o file <a href=http://www.server.com/ >http://www.server.com/</a></strong> - Продолжить загрузку документа с веб-сервера<br> <strong>curl -z local.html <a href=http://remote.server.com/remote.html>http://remote.server.com/remote.html</a></strong> - Выполнить загрузку, которая будет выполняться только в том случае, если удаленный файл новее локальной копии<br> <strong>curl -z "Jan 12 2012" <a href=http://remote.server.com/remote.html>http://remote.server.com/remote.html</a></strong> - Curl загрузит файл только в том случае, если он был обновлен после 12 января 2012 г. </p> </div> <h4 id=telnet>Telnet<a class=headerlink href=#telnet title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong>curl telnet://remote.server.com:port</strong> - Подключитесь к удаленному серверу telnet, используя командную строку<br> <strong>curl -tTTYPE=vt100 telnet://remote.server.com</strong> - Чтобы сообщить серверу, что мы используем терминал vt100, попробуйте что-то вроде </p> </div> <h3 id=416-http-status-codes>4.16 HTTP Status Codes<a class=headerlink href=#416-http-status-codes title="Permanent link">&para;</a></h3> <h4 id=что-такое-коды-статуса-и-почему-они-важны>Что такое коды статуса и почему они важны?<a class=headerlink href=#что-такое-коды-статуса-и-почему-они-важны title="Permanent link">&para;</a></h4> <p>Когда клиент делает запрос на сервер, коды статуса позволяют узнать, был ли запрос успешным, неудавшимся или чем-то другим. Коды статуса поддерживаются Управление по присвоенным номерам в Интернете, или IANA, и включает в себя коды статуса от Интернет инженерной целевой группы (IETF) и Интернет-общества (ISOC). В соответствии с определением IANA организация, tВот пять классификаций http статус трескиes:</p> <p><strong>1xx</strong>: <em>Информационные ответы</em> – Запрос получен, продолжается процесс<br> <strong>2xx</strong>: <em>Успешные ответы</em> – Действие было успешно получено, понято, и принято<br> <strong>3xx</strong>: <em>Сообщения о перенаправлении</em> – Дальнейшие действия должны быть приняты для того, чтобы завершить запрос<br> <strong>4xx</strong>: <em>Ошибка клиента</em> – Запрос содержит плохой синтаксис или не может быть выполнен<br> <strong>5xx</strong>: <em>Ошибка сервера</em> – Сервер не выполнил явно действительный запрос </p> <h5 id=информационные-ответы>Информационные ответы<a class=headerlink href=#информационные-ответы title="Permanent link">&para;</a></h5> <h5 id=информационные-ответы_1>Информационные ответы<a class=headerlink href=#информационные-ответы_1 title="Permanent link">&para;</a></h5> <div class="admonition info"> <p class=admonition-title>Informational</p> <p>Данная группа отвечает за передачу данных. Коды этого типа свидетельствуют о том, что запрос принят сервером и обрабатывается.</p> </div> <table> <thead> <tr> <th style="text-align: center;">Код</th> <th style="text-align: center;">Значение</th> <th style="text-align: left;">Описание</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">100</td> <td style="text-align: center;">Continue</td> <td style="text-align: left;">Промежуточный ответ, он указывает, что клиент должен продолжить запрос или игнорировать этот ответ, если запрос уже завершен.</td> </tr> <tr> <td style="text-align: center;">101</td> <td style="text-align: center;">Switching Protocols</td> <td style="text-align: left;">Этот код отправляется в ответ на заголовок запроса Upgrade от клиента и указывает протокол, на который переключается сервер.</td> </tr> <tr> <td style="text-align: center;">102</td> <td style="text-align: center;">Processing</td> <td style="text-align: left;">Сервер получил и обрабатывает запрос, но ответа пока нет.</td> </tr> <tr> <td style="text-align: center;">103</td> <td style="text-align: center;">Early Hints</td> <td style="text-align: left;">Этот код в первую очередь предназначен для использования с заголовком Link, позволяя пользовательскому агенту начать предварительную загрузку ресурсов или осуществить предварительное соединение к источнику ресурсов, пока сервер готовит ответ.</td> </tr> </tbody> </table> <h5 id=успешные-ответы>Успешные ответы<a class=headerlink href=#успешные-ответы title="Permanent link">&para;</a></h5> <div class="admonition check"> <p class=admonition-title>Success</p> <p>Коды группы сообщают, что запрос не только принят сервером, но и успешно обработан.</p> </div> <table> <thead> <tr> <th style="text-align: center;">Код</th> <th style="text-align: center;">Значение</th> <th style="text-align: left;">Описание</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">200</td> <td style="text-align: center;">OK</td> <td style="text-align: left;">Один из самых популярных ответов. Он свидетельствует о том, что обмен данными между клиентом и сервером прошли успешно. Именно код ответа 200 ждут от ресурса, чтобы проверить, что все работает как надо: сайт загружен, файл открывается и т.д. Значение результата «успех» зависит от метода HTTP: <br> <strong>GET</strong>: Ресурс был получен и передан в теле сообщения.<br> <strong>HEAD</strong>: Ответ содержит заголовки, но тела сообщения нет.<br> <strong>PUT</strong> или <strong>POST</strong>: Ресурс, описывающий результат действия, передан в теле сообщения.<br> <strong>TRACE</strong>: Тело сообщения содержит сообщение запроса, полученное сервером.</td> </tr> <tr> <td style="text-align: center;">201</td> <td style="text-align: center;">Created</td> <td style="text-align: left;">Запрос выполнен успешно, и в результате был создан новый ресурс. Обычно это ответ, отправляемый на запросы <code>POST</code> или <code>PUT</code>.</td> </tr> <tr> <td style="text-align: center;">202</td> <td style="text-align: center;">Accepted</td> <td style="text-align: left;">Запрос получен, но еще не обработан. Это «уклончивый» ответ, поскольку в HTTP нет возможности позже отправить асинхронный ответ с результатом обработки запроса. Этот код предназначен для случаев, когда запрос обрабатывается другим процессом или сервером, а также для пакетной обработки.</td> </tr> <tr> <td style="text-align: center;">203</td> <td style="text-align: center;">Non-Authoritative Information</td> <td style="text-align: left;">Возвращенные метаданные не полностью совпадают с теми, которые доступны на исходном сервере, а получены из другого источника. Чаще всего это используется для зеркал или резервных копий ресурсов. За исключением таких случаев предпочтительнее использовать ответ <code>200 OK</code>.</td> </tr> <tr> <td style="text-align: center;">204</td> <td style="text-align: center;">No Content</td> <td style="text-align: left;">Для этого запроса нет содержимого для отправки, но заголовки ответа могут быть полезны. Пользовательский агент может использовать их для обновления закешированных заголовков, полученных ранее для этого ресурса.</td> </tr> <tr> <td style="text-align: center;">205</td> <td style="text-align: center;">Reset Content</td> <td style="text-align: left;">Сообщает пользовательскому агенту, что необходимо сбросить отображение документа, который отправил этот запрос.</td> </tr> <tr> <td style="text-align: center;">206</td> <td style="text-align: center;">Partial Content</td> <td style="text-align: left;">Свидетельствует о частичном выполнении GET-запроса сервером, возвращая только запрошенную пользователем часть контента. Этот код встречается при использовании кэширования.</td> </tr> <tr> <td style="text-align: center;">207</td> <td style="text-align: center;">Multi-Status</td> <td style="text-align: left;">Передаёт информацию о нескольких ресурсах в случаях, когда могут быть уместны несколько кодов состояния.</td> </tr> <tr> <td style="text-align: center;">208</td> <td style="text-align: center;">Already Reported</td> <td style="text-align: left;">Используется внутри элемента ответа <code>&lt;dav:propstat&gt;</code>, чтобы избежать повторного перечисления «привязок» и дублирования данных.</td> </tr> <tr> <td style="text-align: center;">226</td> <td style="text-align: center;">IM Used</td> <td style="text-align: left;">Используется для ответа на запросы <code>GET</code> в тех случаях, когда сервер хочет отправить только изменённую часть ресурса (то есть «дельту»).</td> </tr> </tbody> </table> <h5 id=сообщения-о-перенаправлении>Сообщения о перенаправлении<a class=headerlink href=#сообщения-о-перенаправлении title="Permanent link">&para;</a></h5> <div class="admonition attention"> <p class=admonition-title>Redirection</p> <p>Данная группа кодов состояния сообщает о перенаправлении пользователя с его согласием или без него.</p> </div> <table> <thead> <tr> <th style="text-align: center;">Код</th> <th style="text-align: center;">Значение</th> <th style="text-align: left;">Описание</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">300</td> <td style="text-align: center;">Multiple Choices</td> <td style="text-align: left;">У запроса более одного возможного ответа. Пользовательский агент или пользователь должен выбрать один из них. Не существует стандартизированного способа выбора одного из ответов, но рекомендуется использовать HTML-ссылки на возможные варианты, чтобы у пользователя была возможность выбора.</td> </tr> <tr> <td style="text-align: center;">301</td> <td style="text-align: center;">Moved Permanently</td> <td style="text-align: left;">URL-адрес запрошенного ресурса был изменен навсегда. Новый URL-адрес указан в ответе.</td> </tr> <tr> <td style="text-align: center;">302</td> <td style="text-align: center;">Found или Moved Temporarily</td> <td style="text-align: left;">URI запрошенного ресурса был временно изменен. В будущем могут быть внесены дальнейшие изменения в URI. Следовательно, этот же URI должен использоваться клиентом в будущих запросах.</td> </tr> <tr> <td style="text-align: center;">303</td> <td style="text-align: center;">See Other</td> <td style="text-align: left;">Указывает пользователю, что запрошенная страница находится по другому адресу. Клиенту необходимо получить запрошенный ресурс по другому URI с помощью запроса <code>GET</code>.</td> </tr> <tr> <td style="text-align: center;">304</td> <td style="text-align: center;">Not Modified</td> <td style="text-align: left;">Этот код используется для целей кэширования. Он сообщает клиенту, что ответ не был изменен, поэтому клиент может продолжать использовать кэшированную версию ответа.</td> </tr> <tr> <td style="text-align: center;">305</td> <td style="text-align: center;">Use Proxy</td> <td style="text-align: left;">Сообщает пользователю, что запрашиваемый ресурс доступен только через прокси. Данные по прокси указаны в ответе сервера. Этот код определен в предыдущей версии спецификации HTTP и в настоящее время устарел из-за проблем безопасности, связанных с внутренней настройкой прокси-сервера.</td> </tr> <tr> <td style="text-align: center;">306</td> <td style="text-align: center;">Unused</td> <td style="text-align: left;">Этот код ответа зарезервирован. Использовался в предыдущей версии спецификации HTTP/1.1.</td> </tr> <tr> <td style="text-align: center;">307</td> <td style="text-align: center;">Temporary Redirect</td> <td style="text-align: left;">Клиенту необходимо получить запрошенный ресурс по другому URI тем же методом, который использовался в предыдущем запросе. Он имеет ту же семантику, что и код ответа <code>302 Found</code>, за исключением того, что пользовательский агент <strong><em>не должен</em></strong> изменять используемый метод: если в первом запросе использовался <code>POST</code>, то <code>POST</code> должен использоваться и во втором запросе.</td> </tr> <tr> <td style="text-align: center;">308</td> <td style="text-align: center;">Permanent Redirect</td> <td style="text-align: left;">Ресурс теперь находится по другому URI, указанному в заголовке ответа <code>Location</code>. Он имеет ту же семантику, что и код ответа <code>301 Moved Permanently</code>, за исключением того, что пользовательский агент <strong><em>не должен</em></strong> изменять используемый метод: если в первом запросе использовался <code>POST</code>, то <code>POST</code> должен использоваться и во втором запросе.</td> </tr> </tbody> </table> <h5 id=ошибка-клиента>Ошибка клиента<a class=headerlink href=#ошибка-клиента title="Permanent link">&para;</a></h5> <div class="admonition fail"> <p class=admonition-title>Client Error</p> <p>Коды состояний данной группы сообщают об ошибках клиента, при которых сервер не может вызвать запрашиваемый результат.</p> </div> <table> <thead> <tr> <th style="text-align: center;">Код</th> <th style="text-align: center;">Значение</th> <th style="text-align: left;">Описание</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">400</td> <td style="text-align: center;">Bad Request</td> <td style="text-align: left;">Сервер не может или не будет обрабатывать запрос из-за чего-то, что воспринимается как ошибка клиента (например, неправильный синтаксис, формат или маршрутизация запроса).</td> </tr> <tr> <td style="text-align: center;">401</td> <td style="text-align: center;">Unauthorized</td> <td style="text-align: left;">Хотя стандарт HTTP определяет этот ответ как «неавторизованный», семантически он означает «неаутентифицированный». Это значит, что клиент должен аутентифицировать себя, чтобы получить запрошенный ответ.</td> </tr> <tr> <td style="text-align: center;">402</td> <td style="text-align: center;">Payment Required</td> <td style="text-align: left;">Этот код ответа зарезервирован для использования в будущем. Первоначальной целью создания этого кода было использование его для цифровых платежных систем, однако он используется очень редко и стандартного соглашения не существует.</td> </tr> <tr> <td style="text-align: center;">403</td> <td style="text-align: center;">Forbidden</td> <td style="text-align: left;">Клиент не имеет прав доступа к контенту, то есть он неавторизован, поэтому сервер отказывается предоставить запрошенный ресурс. В отличие от <code>401 Unauthorized</code>, личность клиента известна серверу.</td> </tr> <tr> <td style="text-align: center;">404</td> <td style="text-align: center;">Not Found</td> <td style="text-align: left;">Сервер не может найти запрошенный ресурс. В браузере это означает, что URL-адрес не распознан. В API это также может означать, что адрес правильный, но ресурс не существует. Сервер также может отправить этот код ответа вместо <code>403 Forbidden</code>, чтобы скрыть существование ресурса от неавторизованного клиента. Это самый известный код ответа из-за его частого появления в сети.</td> </tr> <tr> <td style="text-align: center;">405</td> <td style="text-align: center;">Method Not Allowed</td> <td style="text-align: left;">Метод запроса известен серверу, но не поддерживается целевым ресурсом. Например, API может не разрешать вызов <code>DELETE</code> для удаления ресурса.</td> </tr> <tr> <td style="text-align: center;">406</td> <td style="text-align: center;">Not Acceptable</td> <td style="text-align: left;">Сервер после выполнения согласования контента не нашёл содержимого, соответствующего критериям, заданным пользовательским агентом.</td> </tr> <tr> <td style="text-align: center;">407</td> <td style="text-align: center;">Proxy Authentication Required</td> <td style="text-align: left;">Этот код ответа похож на <code>401 Unauthorized</code>, но аутентификация должна выполняться через прокси-сервер.</td> </tr> <tr> <td style="text-align: center;">408</td> <td style="text-align: center;">Request Timeout</td> <td style="text-align: left;">Сервер может отправить этот код ответа при неиспользовании соединения, даже без предварительного запроса со стороны клиента. Он означает, что сервер хотел бы закрыть это соединение. Этот ответ используется сравнительно часто, поскольку некоторые браузеры (такие как Chrome, Firefox 27+ или IE9) для ускорения используют механизмы предварительного подключения HTTP. Некоторые серверы просто закрывают соединение, не отправляя это сообщение.</td> </tr> <tr> <td style="text-align: center;">409</td> <td style="text-align: center;">Conflict</td> <td style="text-align: left;">Запрос конфликтует с текущим состоянием сервера.</td> </tr> <tr> <td style="text-align: center;">410</td> <td style="text-align: center;">Gone</td> <td style="text-align: left;">Запрошенное содержимое было удалено с сервера, и отсутствует возможность переадресации. Ожидается, что клиенты удалят свои кеши и ссылки на этот ресурс. Спецификация HTTP предполагает, что этот код ответа будет использоваться для «ограниченных по времени или рекламных услуг». API не обязаны указывать ресурсы, которые были удалены, с помощью этого кода.</td> </tr> <tr> <td style="text-align: center;">411</td> <td style="text-align: center;">Length Required</td> <td style="text-align: left;">Запрос отклонён, потому что сервер требует указание поля заголовка <code>Content-Length</code>, но оно не определено.</td> </tr> <tr> <td style="text-align: center;">412</td> <td style="text-align: center;">Precondition Failed</td> <td style="text-align: left;">Клиент указал в заголовках запроса условия, которым сервер не соответствует.</td> </tr> <tr> <td style="text-align: center;">413</td> <td style="text-align: center;">Payload Too Large</td> <td style="text-align: left;">Размер объекта запроса превышает ограничения, определенные сервером. Сервер может закрыть соединение или вернуть поле заголовка <code>Retry-After</code>.</td> </tr> <tr> <td style="text-align: center;">414</td> <td style="text-align: center;">URI Too Long</td> <td style="text-align: left;">Запрошенный клиентом URI слишком длинный для того, чтобы сервер смог его обработать.</td> </tr> <tr> <td style="text-align: center;">415</td> <td style="text-align: center;">Unsupported Media Type</td> <td style="text-align: left;">Запрос отклонён, потому что медиа формат запрашиваемых данных не поддерживается сервером.</td> </tr> <tr> <td style="text-align: center;">416</td> <td style="text-align: center;">Range Not Satisfiable</td> <td style="text-align: left;">Сервер не может корректно обработать запрос с учётом диапазона, указанного в поле заголовка <code>Range</code>.</td> </tr> <tr> <td style="text-align: center;">417</td> <td style="text-align: center;">Expectation Failed</td> <td style="text-align: left;">Сервер не может выполнить ожидание, указанное в поле заголовка запроса <code>Expect</code>.</td> </tr> <tr> <td style="text-align: center;">418</td> <td style="text-align: center;">I'm a teapot</td> <td style="text-align: left;">«Шуточный» ответ: сервер отклоняет попытку заварить кофе в чайнике.</td> </tr> <tr> <td style="text-align: center;">421</td> <td style="text-align: center;">Misdirected Request</td> <td style="text-align: left;">Сервер не может дать ответ. Возможно сервер не настроен для комбинации схемы и полномочий, указанных в URI запроса.</td> </tr> <tr> <td style="text-align: center;">422</td> <td style="text-align: center;">Unprocessable Content</td> <td style="text-align: left;">Запрос сформирован правильно, но его невозможно выполнить из-за семантических ошибок.</td> </tr> <tr> <td style="text-align: center;">423</td> <td style="text-align: center;">Locked</td> <td style="text-align: left;">Запрашиваемый ресурс заблокирован.</td> </tr> <tr> <td style="text-align: center;">424</td> <td style="text-align: center;">Failed Dependency</td> <td style="text-align: left;">Запрос не выполнен из-за проблем в предыдущем запросе.</td> </tr> <tr> <td style="text-align: center;">425</td> <td style="text-align: center;">Too Early</td> <td style="text-align: left;">Клиент отправил порцию данных слишком рано, до того как сервер установил безопасное соединение.</td> </tr> <tr> <td style="text-align: center;">426</td> <td style="text-align: center;">Upgrade Required</td> <td style="text-align: left;">Сервер отказывается выполнять запрос с использованием текущего протокола, но может быть готов сделать это после смены протокола на указанный в заголовке ответа <code>Upgrade</code>.</td> </tr> <tr> <td style="text-align: center;">428</td> <td style="text-align: center;">Precondition Required</td> <td style="text-align: left;">Сервер требует, чтобы запрос содержал условия. Этот ответ предназначен для предотвращения проблемы одновременного изменения ресурса несколькими пользователями.</td> </tr> <tr> <td style="text-align: center;">429</td> <td style="text-align: center;">Too Many Requests</td> <td style="text-align: left;">Пользователь отправил слишком много запросов в определённый промежуток времени.</td> </tr> <tr> <td style="text-align: center;">431</td> <td style="text-align: center;">Request Header Fields Too Large</td> <td style="text-align: left;">Сервер не будет обрабатывать запрос, потому что поля заголовка слишком велики. Запрос может быть отправлен повторно после уменьшения размера полей заголовка.</td> </tr> <tr> <td style="text-align: center;">451</td> <td style="text-align: center;">Unavailable For Legal Reasons</td> <td style="text-align: left;">Пользовательский агент запросил ресурс, который не может быть предоставлен по закону, например веб-страницу, подвергнутую цензуре со стороны правительства.</td> </tr> </tbody> </table> <h5 id=ошибка-сервера>Ошибка сервера<a class=headerlink href=#ошибка-сервера title="Permanent link">&para;</a></h5> <div class="admonition bug"> <p class=admonition-title>Server Error</p> <p>В эту группу входят коды ошибок со стороны сервера, когда по тем или иным причинам он не способен обработать запрос или выполнить требуемую операцию.</p> </div> <table> <thead> <tr> <th style="text-align: center;">Код</th> <th style="text-align: center;">Значение</th> <th style="text-align: left;">Описание</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">500</td> <td style="text-align: center;">Internal Server Error</td> <td style="text-align: left;">Код оповещает о возникшей внутренней ошибке сервера или его аварийном отказе.</td> </tr> <tr> <td style="text-align: center;">501</td> <td style="text-align: center;">Not Implemented</td> <td style="text-align: left;">Сервер столкнулся с запросом, который не смог распознать. Либо запрос не поддерживается и не может быть обработан.</td> </tr> <tr> <td style="text-align: center;">502</td> <td style="text-align: center;">Bad Gateway</td> <td style="text-align: left;">Такой ответ может прислать сервер, который выступает в качестве шлюза, если в процессе обработки запроса он получил недопустимый ответ от целевого сервера. Частая причина — несогласованные протоколов между шлюзом и сервером (ошибки DNS, прокси, хостинга).</td> </tr> <tr> <td style="text-align: center;">503</td> <td style="text-align: center;">Service Unavailable</td> <td style="text-align: left;">Сервер не готов обработать запрос в данный момент. Распространёнными причинами являются техническое обслуживание или перегрузка сервера. Вместе с таким ответом следует отправлять удобную для пользователя страницу с объяснением проблемы, а также HTTP-заголовок <code>Retry-After</code> с расчётным временем решения проблемы. Кроме того, полезно отправлять заголовки с информацией о кешировании, поскольку эти временные ответы обычно не следует кэшировать.</td> </tr> <tr> <td style="text-align: center;">504</td> <td style="text-align: center;">Gateway Timeout</td> <td style="text-align: left;">Такой ответ может прислать сервер, который выступает в качестве шлюза, если в процессе обработки запроса он не может вовремя получить ответ от целевого сервера.</td> </tr> <tr> <td style="text-align: center;">505</td> <td style="text-align: center;">HTTP Version Not Supported</td> <td style="text-align: left;">Используемая в запросе версия HTTP не поддерживается сервером. Встречается при использовании устаревшего формата HTTP-протокола.</td> </tr> <tr> <td style="text-align: center;">506</td> <td style="text-align: center;">Variant Also Negotiates</td> <td style="text-align: left;">На сервере произошла внутренняя ошибка конфигурации: выбранный в процессе согласования вариант ресурса не является подходящим. Сервер не может обработать запрос из-за его неправильной настройки. Сервер зацикливает ответ на себя, выдавая ошибку.</td> </tr> <tr> <td style="text-align: center;">507</td> <td style="text-align: center;">Insufficient Storage</td> <td style="text-align: left;">Запрос не выполнен, потому что серверу не удалось сохранить данные. Означает нехватку места на сервере для обработки запросов пользователя. Нужно освободить или увеличить память.</td> </tr> <tr> <td style="text-align: center;">508</td> <td style="text-align: center;">Loop Detected</td> <td style="text-align: left;">Ошибка возникает в связи с бесконечным перенаправлением. При обработке запроса возникает петля, что приводит к завершению операции.</td> </tr> <tr> <td style="text-align: center;">509</td> <td style="text-align: center;">Bandwidth Limit Exceeded</td> <td style="text-align: left;">Превышен установленный лимит потребления трафика. Ошибка актуальная для интернет-каналов с ограничением по трафику.</td> </tr> <tr> <td style="text-align: center;">510</td> <td style="text-align: center;">Not Extended</td> <td style="text-align: left;">Сервер не поддерживает и не может отработать запрашиваемое пользователем расширение. В теле ошибки может быть приведен список доступных расширений.</td> </tr> <tr> <td style="text-align: center;">511</td> <td style="text-align: center;">Network Authentication Required</td> <td style="text-align: left;">Клиенту необходимо пройти аутентификацию для получения доступа к сети.</td> </tr> </tbody> </table> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 17, 2024</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=file_system.html class="md-footer__link md-footer__link--prev" aria-label="Previous: Файловая система"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Файловая система </div> </div> </a> <a href=ssh_scp.html class="md-footer__link md-footer__link--next" aria-label="Next: SSH SCP"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> SSH SCP </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; <a href=https://github.com/D34m0nN0n3>Dmitriy Prigoda</a>. </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["content.tabs.link", "navigation.footer", "navigation.indexes", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.integrate"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=assets/javascripts/bundle.83f73b43.min.js></script> <script src=assets/extra.js></script> <script src=assets/tex-mml-chtml.js></script> <script src=assets/tablesort.min.js></script> <script src=assets/tablesort.js></script> </body> </html>