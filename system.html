<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Сборником команд и задач (UnixToolbox)"><meta name=author content="Dmitriy Prigoda"><link rel=canonical href=https://D34m0nN0n3.github.io/unixtoolbox/system.html><link rel=prev href=index.html><link rel=next href=processes.html><link rel=icon href=assets/img/favicon/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.41"><title>Система - UnixToolbox</title><link rel=stylesheet href=assets/stylesheets/main.0253249f.min.css><link rel=stylesheet href=assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=assets/extra.css><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-BT11X31T69"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-BT11X31T69",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-BT11X31T69",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=red> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#1-система class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=index.html title=UnixToolbox class="md-header__button md-logo" aria-label=UnixToolbox data-md-component=logo> <img src=assets/img/logo/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> UnixToolbox </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Система </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/D34m0nN0n3/unixtoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> D34m0nN0n3/unixtoolbox </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title=UnixToolbox class="md-nav__button md-logo" aria-label=UnixToolbox data-md-component=logo> <img src=assets/img/logo/logo.svg alt=logo> </a> UnixToolbox </label> <div class=md-nav__source> <a href=https://github.com/D34m0nN0n3/unixtoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> D34m0nN0n3/unixtoolbox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=index.html class=md-nav__link> <span class=md-ellipsis> Введение </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Система </span> <span class="md-nav__icon md-icon"></span> </label> <a href=system.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Система </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-система class=md-nav__link> <span class=md-ellipsis> 1 Система </span> </a> <nav class=md-nav aria-label="1 Система"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-информация-об-аппаратном-обеспечении class=md-nav__link> <span class=md-ellipsis> 1.1 Информация об аппаратном обеспечении </span> </a> </li> <li class=md-nav__item> <a href=#12-загрузка-статистика-и-сообщения class=md-nav__link> <span class=md-ellipsis> 1.2 Загрузка, статистика и сообщения </span> </a> </li> <li class=md-nav__item> <a href=#13-пользователи class=md-nav__link> <span class=md-ellipsis> 1.3 Пользователи </span> </a> </li> <li class=md-nav__item> <a href=#14-ограничения class=md-nav__link> <span class=md-ellipsis> 1.4 Ограничения </span> </a> <nav class=md-nav aria-label="1.4 Ограничения"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#freebsd class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=#solaris class=md-nav__link> <span class=md-ellipsis> Solaris </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#15-уровни-выполнения class=md-nav__link> <span class=md-ellipsis> 1.5 Уровни выполнения </span> </a> <nav class=md-nav aria-label="1.5 Уровни выполнения"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_1 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> <nav class=md-nav aria-label=Linux> <ul class=md-nav__list> <li class=md-nav__item> <a href=#systemv class=md-nav__link> <span class=md-ellipsis> SystemV </span> </a> </li> <li class=md-nav__item> <a href=#systemd class=md-nav__link> <span class=md-ellipsis> Systemd </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#freebsd_1 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=#windows class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#16-сброс-пароля-root class=md-nav__link> <span class=md-ellipsis> 1.6 Сброс пароля root </span> </a> <nav class=md-nav aria-label="1.6 Сброс пароля root"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_2 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> <nav class=md-nav aria-label=Linux> <ul class=md-nav__list> <li class=md-nav__item> <a href=#метод-1 class=md-nav__link> <span class=md-ellipsis> Метод 1 </span> </a> </li> <li class=md-nav__item> <a href=#метод-2 class=md-nav__link> <span class=md-ellipsis> Метод 2 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#freebsd_2 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> <li class=md-nav__item> <a href=#unixes-freebsd-и-linux class=md-nav__link> <span class=md-ellipsis> Unixes, FreeBSD и Linux </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#17-модули-ядра class=md-nav__link> <span class=md-ellipsis> 1.7 Модули ядра </span> </a> </li> <li class=md-nav__item> <a href=#18-компиляция-ядра class=md-nav__link> <span class=md-ellipsis> 1.8 Компиляция ядра </span> </a> <nav class=md-nav aria-label="1.8 Компиляция ядра"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#linux_3 class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=#freebsd_3 class=md-nav__link> <span class=md-ellipsis> FreeBSD </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#19-восстановление-grub class=md-nav__link> <span class=md-ellipsis> 1.9 Восстановление grub </span> </a> </li> <li class=md-nav__item> <a href=#110-lvm class=md-nav__link> <span class=md-ellipsis> 1.10 LVM </span> </a> <nav class=md-nav aria-label="1.10 LVM"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#инициализация-дисков-и-разделов class=md-nav__link> <span class=md-ellipsis> Инициализация дисков и разделов </span> </a> </li> <li class=md-nav__item> <a href=#создание-группы-томов class=md-nav__link> <span class=md-ellipsis> Создание группы томов </span> </a> </li> <li class=md-nav__item> <a href=#активация-группы-томов class=md-nav__link> <span class=md-ellipsis> Активация группы томов </span> </a> </li> <li class=md-nav__item> <a href=#удаление-группы-томов class=md-nav__link> <span class=md-ellipsis> Удаление группы томов </span> </a> </li> <li class=md-nav__item> <a href=#добавление-физических-томов-в-группу-томов class=md-nav__link> <span class=md-ellipsis> Добавление физических томов в группу томов </span> </a> </li> <li class=md-nav__item> <a href=#удаление-физических-томов-из-группы-томов class=md-nav__link> <span class=md-ellipsis> Удаление физических томов из группы томов </span> </a> </li> <li class=md-nav__item> <a href=#создание-логического-тома class=md-nav__link> <span class=md-ellipsis> Создание логического тома </span> </a> </li> <li class=md-nav__item> <a href=#удаление-логических-томов class=md-nav__link> <span class=md-ellipsis> Удаление логических томов </span> </a> </li> <li class=md-nav__item> <a href=#увеличение-логических-томов class=md-nav__link> <span class=md-ellipsis> Увеличение логических томов </span> </a> </li> <li class=md-nav__item> <a href=#уменьшение-размера-логического-тома class=md-nav__link> <span class=md-ellipsis> Уменьшение размера логического тома </span> </a> </li> <li class=md-nav__item> <a href=#перенос-данных-с-физического-тома class=md-nav__link> <span class=md-ellipsis> Перенос данных с физического тома </span> </a> </li> <li class=md-nav__item> <a href=#перенос-группы-томов-на-другую-систему class=md-nav__link> <span class=md-ellipsis> Перенос группы томов на другую систему </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#111-разное class=md-nav__link> <span class=md-ellipsis> 1.11 Разное </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=processes.html class=md-nav__link> <span class=md-ellipsis> Процессы </span> </a> </li> <li class=md-nav__item> <a href=file_system.html class=md-nav__link> <span class=md-ellipsis> Файловая система </span> </a> </li> <li class=md-nav__item> <a href=network.html class=md-nav__link> <span class=md-ellipsis> Сеть </span> </a> </li> <li class=md-nav__item> <a href=ssh_scp.html class=md-nav__link> <span class=md-ellipsis> SSH SCP </span> </a> </li> <li class=md-nav__item> <a href=vpn_with_ssh.html class=md-nav__link> <span class=md-ellipsis> VPN </span> </a> </li> <li class=md-nav__item> <a href=rsync.html class=md-nav__link> <span class=md-ellipsis> RSYNC </span> </a> </li> <li class=md-nav__item> <a href=sudo.html class=md-nav__link> <span class=md-ellipsis> SUDO </span> </a> </li> <li class=md-nav__item> <a href=encrypt_files.html class=md-nav__link> <span class=md-ellipsis> Шифрование файлов </span> </a> </li> <li class=md-nav__item> <a href=encrypt_partitions.html class=md-nav__link> <span class=md-ellipsis> Шифрование разделов </span> </a> </li> <li class=md-nav__item> <a href=ssl_certificates.html class=md-nav__link> <span class=md-ellipsis> Сертификаты SSL </span> </a> </li> <li class=md-nav__item> <a href=cvs.html class=md-nav__link> <span class=md-ellipsis> CVS </span> </a> </li> <li class=md-nav__item> <a href=svn.html class=md-nav__link> <span class=md-ellipsis> SVN </span> </a> </li> <li class=md-nav__item> <a href=git.html class=md-nav__link> <span class=md-ellipsis> GIT </span> </a> </li> <li class=md-nav__item> <a href=useful_commands.html class=md-nav__link> <span class=md-ellipsis> Полезные команды </span> </a> </li> <li class=md-nav__item> <a href=install_software.html class=md-nav__link> <span class=md-ellipsis> Установка программного обеспечения </span> </a> </li> <li class=md-nav__item> <a href=convert_media.html class=md-nav__link> <span class=md-ellipsis> Конвертирование медиафайлов </span> </a> </li> <li class=md-nav__item> <a href=printing.html class=md-nav__link> <span class=md-ellipsis> Печать </span> </a> </li> <li class=md-nav__item> <a href=database.html class=md-nav__link> <span class=md-ellipsis> Базы данных </span> </a> </li> <li class=md-nav__item> <a href=disk_quota.html class=md-nav__link> <span class=md-ellipsis> Квотирование диска </span> </a> </li> <li class=md-nav__item> <a href=shells.html class=md-nav__link> <span class=md-ellipsis> Терминальные оболочки </span> </a> </li> <li class=md-nav__item> <a href=scripting.html class=md-nav__link> <span class=md-ellipsis> Создание скриптов </span> </a> </li> <li class=md-nav__item> <a href=programming.html class=md-nav__link> <span class=md-ellipsis> Программирование </span> </a> </li> <li class=md-nav__item> <a href=configuration_management.html class=md-nav__link> <span class=md-ellipsis> Управление конфигурациями </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Система</h1> <h2 id=1-система>1 Система<a class=headerlink href=#1-система title="Permanent link">&para;</a></h2> <div class="admonition abstract"> <p><a href=#11-информация-об-аппаратном-обеспечении>Оборудование</a> | <a href=#12-загрузка-статистика-и-сообщения>Статистика</a> | <a href=#13-пользователи>Пользователи</a> | <a href=#14-ограничения>Ограничения</a> | <a href=#15-уровни-выполнения>Уровни выполнения</a> | <a href=#16-сброс-пароля-root>Сброс пароля root</a> | <a href=#17-модули-ядра>Модули ядра</a> | <a href=#18-компиляция-ядра>Компиляция ядра</a> | <a href=#19-восстановление-grub>Восстановление grub</a> | <a href=110-lvm>LVM</a> | <a href=#111-разное>Разное</a></p> </div> <div class="admonition example"> <p class=admonition-title>Информация о работающем ядре и системе</p> <p><strong># uname -a</strong> - Получить версию ядра (так же выводит и версию BSD)<br> <strong># lsb_release -a</strong> - Полная информация о выпуске любого дистрибутива LSB<br> <strong># cat /etc/redhat-release</strong> - Получить версию Red Hat<br> <strong># cat /etc/SuSE-release</strong> - Получить версию SuSE<br> <strong># cat /etc/debian_version</strong> - Получить версию Debian </p> </div> <p>Используйте <code>/etc/DISTR-release</code> с DISTR= lsb (Ubuntu), redhat, gentoo, mandrake, sun (Solaris) и т.д. См. также <code>/etc/issue</code>.</p> <div class="admonition example"> <p><strong># uptime</strong> - Показать, как долго система работает + загрузку<br> <strong># hostname</strong> - Имя хоста системы<br> <strong># hostname -i</strong> - Отобразить IP-адрес хоста. (Только для Linux)<br> <strong># man hier</strong> - Описание иерархии файловой системы<br> <strong># last reboot</strong> - Показать историю перезагрузок системы </p> </div> <h3 id=11-информация-об-аппаратном-обеспечении>1.1 Информация об аппаратном обеспечении<a class=headerlink href=#11-информация-об-аппаратном-обеспечении title="Permanent link">&para;</a></h3> <p>Обнаруженное ядром оборудование.</p> <div class="admonition example"> <p><strong># dmesg</strong> - Обнаруженное оборудование и сообщения загрузки<br> <strong># lsdev</strong> - Информация об установленном оборудовании<br> <strong># dd if=/dev/mem bs=1k skip=768 count=256 2&gt;/dev/null | strings -n 8</strong> - Чтение BIOS </p> </div> <div class="admonition example"> <p class=admonition-title>Linux</p> <p><strong># cat /proc/cpuinfo</strong> - Модель процессора<br> <strong># cat /proc/meminfo</strong> - Аппаратная память<br> <strong># grep MemTotal /proc/meminfo</strong> - Отобразить физическую память<br> <strong># watch -n1 'cat /proc/interrupts'</strong> - Непрерывно отслеживать изменяемые прерывания<br> <strong># free -m</strong> - Использованная и свободная память (-m для МБ)<br> <strong># cat /proc/devices</strong> - Настроенные устройства<br> <strong># lspci -tv</strong> - Показать устройства PCI<br> <strong># lsusb -tv</strong> - Показать устройства USB<br> <strong># lshal</strong> - Показать список всех устройств со свойствами<br> <strong># dmidecode</strong> - Показать информацию о оборудовании DMI/SMBIOS из BIOS </p> </div> <div class="admonition example"> <p class=admonition-title>FreeBSD</p> <p><strong># sysctl hw.model</strong> - Модель процессора<br> <strong># sysctl hw</strong> - Предоставляет много информации об оборудовании<br> <strong># sysctl hw.ncpu</strong> - Количество установленных активных процессоров<br> <strong># sysctl vm</strong> - Использование памяти<br> <strong># sysctl hw.realmem</strong> - Аппаратная память<br> <strong># sysctl -a | grep mem</strong> - Настройки и информация о памяти ядра<br> <strong># sysctl dev</strong> - Настроенные устройства<br> <strong># pciconf -l -cv</strong> - Показать устройства PCI<br> <strong># usbdevs -v</strong> - Показать устройства USB<br> <strong># atacontrol list</strong> - Показать устройства ATA<br> <strong># camcontrol devlist -v</strong> - Показать устройства SCSI </p> </div> <h3 id=12-загрузка-статистика-и-сообщения>1.2 Загрузка, статистика и сообщения<a class=headerlink href=#12-загрузка-статистика-и-сообщения title="Permanent link">&para;</a></h3> <p>Следующие команды полезны для определения того, что происходит в системе.</p> <div class="admonition example"> <p><strong># top</strong> - отображение и обновление процессов с наибольшим использованием ЦП<br> <strong># mpstat 1</strong> - статистика, связанная с процессорами<br> <strong># vmstat 2</strong> - статистика виртуальной памяти<br> <strong># iostat 2</strong> - статистика ввода-вывода (интервалы в 2 секунды)<br> <strong># systat -vmstat 1</strong> - сводка статистики системы BSD (интервалы в 1 секунду)<br> <strong># systat -tcp 1</strong> - соединения TCP BSD (попробуйте также -ip)<br> <strong># systat -netstat 1</strong> - активные сетевые соединения BSD<br> <strong># systat -ifstat 1</strong> - сетевой трафик через активные интерфейсы BSD<br> <strong># systat -iostat 1</strong> - загрузка ЦП и дискового пропускного способности BSD<br> <strong># ipcs -a</strong> - информация о межпроцессных коммуникациях System V<br> <strong># tail -n 500 /var/log/messages</strong> - Последние 500 сообщений ядра/syslog<br> <strong># tail /var/log/warn</strong> - Предупреждающие сообщения системы, см. syslog.conf </p> </div> <h3 id=13-пользователи>1.3 Пользователи<a class=headerlink href=#13-пользователи title="Permanent link">&para;</a></h3> <p>Следующие команды полезны для определения того, что происходит в системе.</p> <div class="admonition example"> <p><strong># id</strong> - Показать активный идентификатор пользователя с логином и группой<br> <strong># last</strong> - Показать последние входы в систему<br> <strong># who</strong> - Показать, кто вошел в систему<br> <strong># groupadd admin</strong> - Добавить группу "admin" и пользователя colin (Linux/Solaris)<br> <strong># useradd -c "Colin Barschel" -g admin -m colin</strong><br> <strong># usermod -a -G &lt;группа&gt; &lt;пользователь&gt;</strong> - Добавить существующего пользователя в группу (RedHat/Debian)<br> <strong># groupmod -A &lt;пользователь&gt; &lt;группа&gt;</strong> - Добавить существующего пользователя в группу (SuSE)<br> <strong># passwd &lt;пользователь&gt;</strong> - Сменить пароль указанному пользователю (в интерактивном режиме)<br> <strong># echo "пользователь:пароль" | sudo chpasswd</strong> - Сменить пароль указанному пользователю (в скриптах)<br> <strong># userdel colin</strong> - Удалить пользователя colin (Linux/Solaris)<br> <strong># adduser joe</strong> - FreeBSD: добавить пользователя joe (интерактивно)<br> <strong># rmuser joe</strong> - FreeBSD: удалить пользователя joe (интерактивно)<br> <strong># pw groupadd admin</strong> - Использовать pw на FreeBSD<br> <strong># pw groupmod admin -m newmember</strong> - Добавить нового участника в группу<br> <strong># pw useradd colin -c "Colin Barschel" -g admin -m -s /bin/tcsh</strong><br> <strong># pw userdel colin; pw groupdel admin</strong> </p> </div> <p>Зашифрованные пароли хранятся в /etc/shadow для Linux и Solaris, и в /etc/master.passwd для FreeBSD. Если master.passwd изменяется вручную (например, для удаления пароля), выполните команду <code># pwd_mkdb -p master.passwd</code> для перестроения базы данных. Чтобы временно запретить вход в систему для всех пользователей, кроме root, используйте nologin. Сообщение в nologin будет отображаться (это может не работать с предварительно распределенными ключами ssh).</p> <div class="admonition example"> <p><strong># echo "Sorry no login now" &gt; /etc/nologin</strong> - (Linux)<br> <strong># echo "Sorry no login now" &gt; /var/run/nologin</strong> - (FreeBSD) </p> </div> <h3 id=14-ограничения>1.4 Ограничения<a class=headerlink href=#14-ограничения title="Permanent link">&para;</a></h3> <p>Некоторым приложениям требуются более высокие ограничения на открытые файлы и сокеты (например, прокси-серверы, веб-серверы, базы данных). По умолчанию ограничения обычно слишком низкие.</p> <h4 id=linux>Linux<a class=headerlink href=#linux title="Permanent link">&para;</a></h4> <p><em>Для каждой оболочки/скрипта</em> Ограничения оболочки управляются с помощью ulimit. Состояние можно проверить с помощью <code>ulimit -a</code>. Например, чтобы изменить ограничение на количество открытых файлов с 1024 до 10240, выполните:</p> <div class="admonition example"> <p><strong># ulimit -n 10240</strong> - Это действительно только в пределах оболочки </p> </div> <p>Команду <code>ulimit</code> можно использовать в скрипте для изменения ограничений только для этого скрипта.</p> <p><em>Для каждого пользователя/процесса</em> Входные пользователи и приложения могут быть настроены в файле <code>/etc/security/limits.conf</code>. Например:</p> <div class="admonition example"> <p><strong># cat /etc/security/limits.conf</strong><br> <strong>* hard nproc 250</strong> - Ограничение на количество процессов пользователя<br> <strong>asterisk hard nofile 409600</strong> - Ограничение на количество открытых файлов приложения </p> </div> <p><em>Для всей системы</em> Ограничения ядра устанавливаются с помощью <code>sysctl</code>. Постоянные ограничения устанавливаются в файле <code>/etc/sysctl.conf</code>.</p> <div class="admonition example"> <p><strong># sysctl -a</strong> - Просмотр всех системных ограничений<br> <strong># sysctl fs.file-max</strong> - Просмотр максимального ограничения на количество открытых файлов<br> <strong># sysctl fs.file-max=102400</strong> - Изменение максимального ограничения на количество открытых файлов<br> <strong># echo "1024 50000" &gt; /proc/sys/net/ipv4/ip_local_port_range</strong> - диапазон портов<br> <strong># cat /etc/sysctl.conf</strong><br> <em>fs.file-max=102400</em> - Постоянная запись в sysctl.conf<br> <strong># cat /proc/sys/fs/file-nr</strong> - Сколько файловых дескрипторов используется </p> </div> <h4 id=freebsd>FreeBSD<a class=headerlink href=#freebsd title="Permanent link">&para;</a></h4> <p><em>На уровне оболочки/скрипта</em> Используйте команду <code>limits</code> в оболочках csh или tcsh, или, как в Linux, используйте <code>ulimit</code> в оболочках sh или bash.</p> <p><em>На уровне пользователя/процесса</em> По умолчанию ограничения при входе в систему устанавливаются в файле <code>/etc/login.conf</code>. Значение "неограничено" все равно ограничено максимальным значением системы.</p> <p><em>На уровне всей системы</em> Ограничения ядра также устанавливаются с помощью <code>sysctl</code>. Постоянные ограничения устанавливаются в файлах <code>/etc/sysctl</code>.conf или <code>/boot/loader.conf</code>. Синтаксис такой же, как в Linux, но ключи отличаются.</p> <div class="admonition example"> <p><strong># sysctl -a</strong> - Просмотр всех системных ограничений<br> <strong># sysctl kern.maxfiles=XXXX</strong> - Максимальное количество файловых дескрипторов<br> <em>kern.ipc.nmbclusters=32768</em> - Постоянная запись в /etc/sysctl.conf<br> <em>kern.maxfiles=65536</em> - Типичные значения для Squid<br> <em>kern.maxfilesperproc=32768</em><br> <em>kern.ipc.somaxconn=8192</em> - TCP ... 1024-5000<br> <strong># sysctl kern.openfiles</strong> - Сколько дескрипторов файлов используется<br> <strong># sysctl kern.ipc.numopensockets</strong> - Сколько открытых сокетов используется<br> <strong># sysctl net.inet.ip.portrange.last=50000</strong> - По умолчанию 1024-5000<br> <strong># netstat -m</strong> - Статистика буферов памяти сети </p> </div> <h4 id=solaris>Solaris<a class=headerlink href=#solaris title="Permanent link">&para;</a></h4> <p>Следующие значения в файле <code>/etc/system</code> увеличат максимальное количество файловых дескрипторов для одного процесса:</p> <div class="admonition example"> <p><em>set rlim_fd_max = 4096</em> - Жесткий лимит на количество файловых дескрипторов для одного процесса<br> <em>set rlim_fd_cur = 1024</em> - Мягкий лимит на количество файловых дескрипторов для одного процесса </p> </div> <h3 id=15-уровни-выполнения>1.5 Уровни выполнения<a class=headerlink href=#15-уровни-выполнения title="Permanent link">&para;</a></h3> <h4 id=linux_1>Linux<a class=headerlink href=#linux_1 title="Permanent link">&para;</a></h4> <h5 id=systemv>SystemV<a class=headerlink href=#systemv title="Permanent link">&para;</a></h5> <p>После загрузки ядро запускает <code>init</code>, который затем запускает rc, который запускает все скрипты, принадлежащие к уровню выполнения. Скрипты хранятся в <code>/etc/init.d</code> и связаны с <code>/etc/rc.d/rcN.d</code>, где N - номер уровня выполнения.</p> <p>Уровень выполнения по умолчанию настраивается в файле <code>/etc/inittab</code>. Обычно это 3 или 5:</p> <div class="admonition example"> <p><strong># grep default: /etc/inittab</strong><br> id:3:initdefault: </p> </div> <p>Фактический уровень выполнения может быть изменен с помощью команды <code>init</code>. Например, чтобы перейти с уровня выполнения 3 на уровень выполнения 5, выполните:</p> <div class="admonition example"> <p><strong># init 5</strong> - Вход в уровень выполнения 5</p> </div> <div class="admonition info"> <p>0 Выключение и остановка<br> 1 Однопользовательский режим (также S)<br> 2 Многопользовательский режим без сети<br> 3 Multi-user with network<br> 5 Multi-user with X<br> 6 Reboot </p> </div> <p>Используйте команду <code>chkconfig</code> для настройки программ, которые будут запускаться при загрузке в определенном уровне выполнения (runlevel).</p> <div class="admonition example"> <p><strong># chkconfig --list</strong> - Список всех скриптов инициализации<br> <strong># chkconfig --list sshd</strong> - Состояние службы sshd<br> <strong># chkconfig sshd --level 35 on</strong> - Конфигурация sshd для уровней 3 и 5<br> <strong># chkconfig sshd off</strong> - Отключение sshd для всех уровней запуска </p> </div> <p>Debian и дистрибутивы на основе Debian, такие как Ubuntu или Knoppix, используют команду <code>update-rc.d</code> для управления скриптами запуска в различных уровнях выполнения. По умолчанию служба запускается в уровнях 2, 3, 4 и 5, а останавливается в уровнях 0, 1 и 6.</p> <div class="admonition example"> <p><strong># update-rc.d sshd defaults</strong> - Активация sshd с настройками по умолчанию<br> <strong># update-rc.d sshd start 20 2 3 4 5 . stop 20 0 1 6 .</strong> - С явными аргументами<br> <strong># update-rc.d -f sshd remove</strong> - Отключение sshd для всех уровней запуска<br> <strong># shutdown -h now (или # poweroff)</strong> - Выключение и остановка системы </p> </div> <h5 id=systemd>Systemd<a class=headerlink href=#systemd title="Permanent link">&para;</a></h5> <p><em>systemd</em> — набор базовых компонентов Linux-системы. Представляет собой менеджер системы и служб, который выполняется как процесс с PID 1 и запускает остальную часть системы. systemd обеспечивает возможности агрессивной параллелизации, сокетную и D-Bus активацию для запуска служб, запуск демонов по запросу, отслеживание процессов с помощью контрольных групп Linux, обслуживание точек (авто)монтирования, а также предлагает развитую транзакционную логику управления службами на основе зависимостей. systemd поддерживает сценарии инициализации SysV и LSB и работает как замена <em>sysvinit</em>. Большинство систем Linux отказались от файла <code>/etc/inittab</code> в пользу systemd targets. Главная команда для работы с systemd — systemctl. Она позволяет (среди прочего) отлеживать состояние системы и управлять системой и службами.</p> <p>Systemd использует юнит типа цель (target) для группировки юнитов по зависимостям и в качестве стандартизированных точек синхронизации. Они выполняют ту же задачу, что и уровни запуска, но действуют немного по-другому. Каждая цель имеет имя, а не номер, и предназначена для конкретных задач; несколько целей могут быть активны одновременно. Некоторые цели реализованы путём наследования служб из других целей с добавлением собственных.</p> <div class="admonition example"> <p><strong>$ systemctl get-default</strong> - Узнать текущую цель<br> <strong># systemctl isolate graphical.target</strong> - Изменение текущей цели командой<br> <strong># systemctl set-default graphical.target</strong> - Установка новой цели загрузки по умолчанию </p> </div> <p>Соответствие уровней SysV целям systemd:</p> <table> <thead> <tr> <th>Уровнень запуска SysV</th> <th>Цель systemd</th> <th>Примечания</th> </tr> </thead> <tbody> <tr> <td>0</td> <td>runlevel0.target, poweroff.target</td> <td>Выключение системы</td> </tr> <tr> <td>1, s, single</td> <td>runlevel1.target, rescue.target</td> <td>Однопользовательский уровень запуска</td> </tr> <tr> <td>2, 4</td> <td>runlevel2.target, runlevel4.target, multi-user.target</td> <td>Уровни запуска, определенные пользователем/специфичные для узла. По умолчанию соответствует уровню запуска 3</td> </tr> <tr> <td>3</td> <td>runlevel3.target, multi-user.target</td> <td>Многопользовательский режим без графики. Пользователи, как правило, входят в систему при помощи множества консолей или через сеть</td> </tr> <tr> <td>5</td> <td>runlevel5.target, graphical.target</td> <td>Многопользовательский режим с графикой. Обычно эквивалентен запуску всех служб на уровне 3 и графического менеджера входа в систему</td> </tr> <tr> <td>6</td> <td>runlevel6.target, reboot.target</td> <td>Перезагрузка</td> </tr> <tr> <td>emergency</td> <td>emergency.target</td> <td>Аварийная оболочка</td> </tr> </tbody> </table> <h4 id=freebsd_1>FreeBSD<a class=headerlink href=#freebsd_1 title="Permanent link">&para;</a></h4> <p>Подход к загрузке BSD отличается от SysV: здесь нет уровней выполнения. Конфигурация конечного состояния загрузки (однопользовательский режим с X или без него) выполняется в файле <code>/etc/ttys</code>. Все скрипты операционной системы располагаются в каталоге <code>/etc/rc.d/</code>, а сторонних приложений - в <code>/usr/local/etc/rc.d/</code>. Включение службы настраивается в файлах <code>/etc/rc.conf</code> и <code>/etc/rc.conf.local</code>. Поведение по умолчанию настраивается в файле <code>/etc/defaults/rc.conf</code>. Скрипты поддерживают команды <code>start|stop|status</code>.</p> <div class="admonition example"> <p><strong># /etc/rc.d/sshd status</strong><br> <em>sshd работает с PID 552.</em><br> <strong># shutdown now</strong> - Переход в однопользовательский режим<br> <strong># exit</strong> - Возврат в многопользовательский режим<br> <strong># shutdown -p now</strong> - Выключение и остановка системы<br> <strong># shutdown -r now</strong> - Перезагрузка </p> </div> <p>Также можно использовать процесс init для перехода в одно из следующих состояний:</p> <div class="admonition info"> <p>0 &nbsp; &nbsp; &nbsp; Остановка и выключение питания (сигнал USR2)<br> 1 &nbsp; &nbsp; &nbsp; Переход в однопользовательский режим (сигнал TERM)<br> 6 &nbsp; &nbsp; &nbsp; Перезагрузка машины (сигнал INT)<br> c &nbsp; &nbsp; &nbsp; Запрет дальнейшего входа (сигнал TSTP)<br> q &nbsp; &nbsp; &nbsp; Пересканирование файла ttys(5) (сигнал HUP) </p> </div> <h4 id=windows>Windows<a class=headerlink href=#windows title="Permanent link">&para;</a></h4> <p>Запуск и остановка службы возможны с использованием имени службы или "описания службы" (которое отображается в панели управления службами) следующим образом:</p> <div class="admonition example"> <p><strong>net stop WSearch</strong> # остановить службу поиска<br> <strong>net start WSearch</strong> # запустить службу поиска<br> <strong>net stop "Windows Search"</strong> # остановить службу поиска Windows<br> <strong>net start "Windows Search"</strong> # запустить службу поиска Windows </p> </div> <h3 id=16-сброс-пароля-root>1.6 Сброс пароля root<a class=headerlink href=#16-сброс-пароля-root title="Permanent link">&para;</a></h3> <h4 id=linux_2>Linux<a class=headerlink href=#linux_2 title="Permanent link">&para;</a></h4> <h5 id=метод-1>Метод 1<a class=headerlink href=#метод-1 title="Permanent link">&para;</a></h5> <p><strong>В системе RHEL/CentOS до версии 7:</strong></p> <ul> <li> <p>При загрузке загрузчика (lilo или grub) введите следующую опцию загрузки: <code>init=/bin/sh</code></p> </li> <li> <p>Ядро примонтирует корневое раздел и запустит оболочку Bourne вместо rc и затем уровня выполнения. Используйте команду passwd для изменения пароля, а затем перезагрузитесь. Забудьте о режиме одного пользователя, так как для этого вам понадобится пароль.</p> </li> <li> <p>Если после загрузки корневой раздел смонтирован только для чтения, перемонтируйте его для записи:</p> </li> </ul> <div class="admonition example"> <p><strong># mount -o remount,rw /</strong><br> <strong># passwd</strong> - или удалите пароль root (/etc/shadow)<br> <strong># sync; mount -o remount,ro /</strong> - синхронизируйте перед повторным примонтирование только для чтения<br> <strong># reboot</strong> </p> </div> <p><strong>В системе RHEL/CentOS версии 7 или более поздней:</strong></p> <ul> <li>Как только загрузчик откроется экран выбора, быстро нажмите стрелки вверх и вниз, чтобы приостановить обратный отсчет.</li> <li>Выберите ядро, с которым вы хотите загрузиться, и нажмите <code>e</code>: вы попадете на экран, где сможете редактировать сценарий загрузчика grub.</li> </ul> <div class="admonition note"> <p>a. Для RHEL/CentOS 7 строка начинается с «linux16».<br> b. Для RHEL/Centos 8x и Fedora строка начинается с «linux». </p> </div> <ul> <li>Добавьте «rd.break» в конце строки (здесь вы можете сделать и другие вещи, но на данный момент это все, что вам нужно).</li> <li>Теперь нажмите <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-x>X</kbd></span>, чтобы запустить отредактированный скрипт загрузчика.</li> <li>Вы загрузитесь и увидите приглашение восстановления, которое выглядит следующим образом: <code>switch_root:/#</code>.</li> <li>Перемонтируйте корневой раздел в режиме чтения и записи, чтобы можно было выполнять команды. Введите следующее: <code>mount -o remount rw /sysroot</code>.</li> <li>Теперь введите <code>chroot/sysroot</code> и нажмите <span class=keys><kbd class=key-enter>Enter</kbd></span>. Вы перейдете в каталог <code>sysroot (/)</code>.</li> <li>Теперь вы можете просто изменить пароль для <em>root</em> с помощью команды <code>passwd</code>.</li> <li>Далее, перед перезагрузкой, вам нужно будет убедиться, что SELinux разрешает изменение файлов. В командной строке введите: <code>touch /.autorelabel</code>. Это сигнализирует SELinux при следующей перезагрузке об изменении файловой системы (измененный пароль) и позволяет загрузить изменения.</li> <li>Введите <code>exit</code>, чтобы выйти из среды chroot, и введите <code>reboot</code>.</li> </ul> <h5 id=метод-2>Метод 2<a class=headerlink href=#метод-2 title="Permanent link">&para;</a></h5> <ul> <li>Запустите систему и, когда отобразится информация о BIOS, выберите опцию меню загрузки и выберите загрузку с установочного диска.</li> <li>Выберите <strong>Troubleshooting</strong>.</li> <li>Выберите <strong>Rescue a Red Hat Enterprise Linux System</strong>.</li> <li>Выберите <strong>Continue</strong> набрав <strong>1</strong> в ответ на диалоговое окно ниже, а затем нажмите клавишу <span class=keys><kbd class=key-enter>Enter</kbd></span>.</li> <li>Получив приглашение ниже, нажмите клавишу <span class=keys><kbd class=key-enter>Enter</kbd></span>. Пожалуйста, нажмите <span class=keys><kbd class=key-enter>Enter</kbd></span>, чтобы получить оболочку.</li> <li>Теперь вы попали в оболочку восстановления, запустите команду <code># chroot /mnt/sysroot</code>, чтобы изменить корень файловой системы на образ вашей системы.</li> <li>Запустите команду <code># passwd root</code>, чтобы изменить корневой пароль системы.</li> <li>Удалите файл автоматической перемаркировки, чтобы предотвратить трудоемкую перемаркировку диска SELinux: <code># rm -f /.autorelabel</code>.</li> <li>Введите команду <code># exit</code>, чтобы выйти из среды chroot.</li> <li>Введите команду <code># exit</code> еще раз, чтобы возобновить инициализацию и завершить загрузку системы.</li> </ul> <h4 id=freebsd_2>FreeBSD<a class=headerlink href=#freebsd_2 title="Permanent link">&para;</a></h4> <p>В FreeBSD загрузитесь в однопользовательский режим, перемонтируйте / в режиме записи и используйте passwd. Вы можете выбрать однопользовательский режим в меню загрузки (опция 4), которое отображается в течение 10 секунд после запуска. Однопользовательский режим предоставит вам корневую оболочку на разделе /.</p> <div class="admonition example"> <p><strong># mount -u /; mount -a</strong> - примонтирует / в режиме записи<br> <strong># passwd</strong><br> <strong># reboot</strong> </p> </div> <h4 id=unixes-freebsd-и-linux>Unixes, FreeBSD и Linux<a class=headerlink href=#unixes-freebsd-и-linux title="Permanent link">&para;</a></h4> <p>Другие Unix-подобные системы могут не позволять вам использовать простой трюк с init. Решение заключается в примонтировании корневого раздела из другой ОС (например, с помощью спасательного CD) и изменении пароля на диске.</p> <p>Загрузите спасательный CD или установочный CD в режиме восстановления, который предоставит вам оболочку. Найдите корневой раздел с помощью <code>fdisk</code>, например <code>fdisk /dev/sda</code>.</p> <p>Примонтируйте его и используйте <code>chroot</code>:</p> <div class="admonition example"> <p><strong># mount -o rw /dev/ad4s3a /mnt</strong><br> <strong># chroot /mnt</strong> - chroot в /mnt<br> <strong># passwd</strong><br> <strong># reboot</strong> </p> </div> <h3 id=17-модули-ядра>1.7 Модули ядра<a class=headerlink href=#17-модули-ядра title="Permanent link">&para;</a></h3> <div class="admonition example"> <p class=admonition-title>Linux</p> <p><strong># lsmod</strong> - Показать все загруженные модули в ядре<br> <strong># modprobe isdn</strong> - Загрузить модуль (здесь isdn) </p> </div> <div class="admonition example"> <p class=admonition-title>FreeBSD</p> <p><strong># kldstat</strong> - Показать все загруженные модули в ядре<br> <strong># kldload crypto</strong> - Загрузить модуль (здесь crypto) </p> </div> <h3 id=18-компиляция-ядра>1.8 Компиляция ядра<a class=headerlink href=#18-компиляция-ядра title="Permanent link">&para;</a></h3> <h4 id=linux_3>Linux<a class=headerlink href=#linux_3 title="Permanent link">&para;</a></h4> <div class="admonition example"> <p><strong># cd /usr/src/linux</strong><br> <strong># make mrproper</strong> - Очистить все, включая файлы конфигурации<br> <strong># make oldconfig</strong> - Повторное использование старого <code>.config</code>, если существует<br> <strong># make menuconfig</strong> - или <code>xconfig</code> (Qt) или <code>gconfig</code> (GTK)<br> <strong># make</strong> - Создать сжатый образ ядра<br> <strong># make modules</strong> - Скомпилировать модули<br> <strong># make modules_install</strong> - Установить модули<br> <strong># make install</strong> - Установить ядро<br> <strong># reboot</strong></p> </div> <h4 id=freebsd_3>FreeBSD<a class=headerlink href=#freebsd_3 title="Permanent link">&para;</a></h4> <p>При необходимости обновите исходное дерево (в <code>/usr/src</code>) с помощью csup (начиная с FreeBSD 6.2 или более поздней версии):</p> <div class="admonition example"> <p><strong># csup \&lt;supfile&gt;</strong></p> </div> <div class="admonition example"> <p class=admonition-title>Я использую следующий supfile:</p> <p>*default host=cvsup5.FreeBSD.org - <a href=http://www.freebsd.org/handbook/cvsup.html#CVSUP-MIRRORS>www.freebsd.org/handbook/cvsup.html#CVSUP-MIRRORS</a><br> *default prefix=/usr<br> *default base=/var/db<br> *default release=cvs delete tag=RELENG_7<br> src-all </p> </div> <p>Для изменения и перестройки ядра скопируйте общий файл конфигурации с новым именем и отредактируйте его по необходимости (вы также можете редактировать файл GENERIC напрямую). Чтобы возобновить компиляцию после прерывания, добавьте опцию <code>NO_CLEAN=YES</code> к команде make, чтобы избежать очистки уже созданных объектов.</p> <div class="admonition example"> <p><strong># cd /usr/src/sys/i386/conf/</strong><br> <strong># cp GENERIC MYKERNEL</strong><br> <strong># cd /usr/src</strong><br> <strong># make buildkernel KERNCONF=MYKERNEL</strong><br> <strong># make installkernel KERNCONF=MYKERNEL</strong> </p> </div> <div class="admonition example"> <p class=admonition-title>Для перестройки полной операционной системы:</p> <p><strong># make buildworld</strong> - Построить полную операционную систему, но не ядро<br> <strong># make buildkernel</strong> - Используйте KERNCONF, как указано выше, если применимо<br> <strong># make installkernel</strong><br> <strong># reboot</strong><br> <strong># mergemaster -p</strong> - Сравнивает только файлы, известные как существенные<br> <strong># make installworld</strong><br> <strong># mergemaster -i -U</strong> - Обновить все конфигурационные файлы и другие файлы<br> <strong># reboot</strong> </p> </div> <div class="admonition example"> <p class=admonition-title>Для небольших изменений в исходном коде вы можете использовать <em>NO_CLEAN=yes</em>, чтобы избежать перестройки всего дерева.</p> <p><strong># make buildworld NO_CLEAN=yes</strong> - Не удалять старые объекты<br> <strong># make buildkernel KERNCONF=MYKERNEL NO_CLEAN=yes</strong> </p> </div> <h3 id=19-восстановление-grub>1.9 Восстановление grub<a class=headerlink href=#19-восстановление-grub title="Permanent link">&para;</a></h3> <p>Вы испортили grub? Загрузитесь с помощью Live CD, [найдите раздел Linux в /dev и используйте fdisk для поиска раздела Linux], примонтируйте раздел Linux, добавьте /proc и /dev, а затем выполните команду <code>grub-install /dev/xyz</code>. Предположим, что Linux находится на разделе <code>/dev/sda6</code>:</p> <div class="admonition example"> <p><strong># mount /dev/sda6 /mnt</strong> - монтирование раздела Linux на /mnt<br> <strong># mount --bind /proc /mnt/proc</strong> - монтирование подсистемы proc в /mnt<br> <strong># mount --bind /dev /mnt/dev</strong> - монтирование устройств в /mnt<br> <strong># chroot /mnt</strong> - изменение корневой директории на раздел Linux<br> <strong># grub-install /dev/sda</strong> - переустановка grub с предыдущими настройками </p> </div> <h3 id=110-lvm>1.10 LVM<a class=headerlink href=#110-lvm title="Permanent link">&para;</a></h3> <p><strong>LVM</strong> (<em>Logical Volume Manager</em>), менеджер логических томов - это система управления дисковым пространством, абстрагирующаяся от физических устройств.</p> <p>Обозначения и понятия:</p> <ul> <li> <p><strong>PV, Physical volume, физический том.</strong> - Обычно это раздел на диске или весь диск. В том числе, устройства программного и аппаратного RAID (которые уже могут включать в себя несколько физических дисков). Физические тома входят в состав группы томов.</p> </li> <li> <p><strong>VG, Volume group, группа томов.</strong> - Это самый верхний уровень абстрактной модели, используемой системой LVM. С одной стороны группа томов состоит из физических томов, с другой -- из логических и представляет собой единую административную единицу.</p> </li> <li> <p><strong>LV, Logical volume, логический том.</strong> - Раздел группы томов, эквивалентен разделу диска в не-LVM системе. Представляет собой блочное устройство и, как следствие, может содержать файловую систему.</p> </li> <li> <p><strong>PE, Physical extent, физический экстент.</strong> - Каждый физический том делиться на порции данных, называющиеся физическими экстентами. Их размеры те же, что и у логических экстентов.</p> </li> <li> <p><strong>LE, Logical extent, логический экстент.</strong> - Каждый логический том делится на порции данных, называющиеся логическими экстентами. Размер логических экстентов не меняется в пределах группы томов.</p> </li> </ul> <p><strong>Работа с LVM</strong></p> <p>Давайте теперь рассмотрим задачи, стоящие перед администратором LVM системы. Помните, что для работы с системой LVM ее нужно инициализировать командами:</p> <div class="admonition example"> <p><strong># vgscan</strong> <strong># vgchange -ay</strong></p> </div> <p>Первая команда сканирует диски на предмет наличия групп томов, вторая активирует все найденные группы томов. Аналогично для завершения всех работ, связанных с LVM, нужно выполнить деактивацию групп:</p> <div class="admonition example"> <p><strong># vgchange -an</strong></p> </div> <p>Первые две строки нужно будет поместить в скрипты автозагрузки (если их там нет), а последнюю можно дописать в скрипт <code>shutdown</code>.</p> <h4 id=инициализация-дисков-и-разделов>Инициализация дисков и разделов<a class=headerlink href=#инициализация-дисков-и-разделов title="Permanent link">&para;</a></h4> <p>Перед использованием диска или раздела в качестве физического тома необходимо его инициализировать:</p> <ul> <li>Для целого диска:</li> </ul> <div class="admonition example"> <p class=admonition-title>Эта команда создает в начале диска дескриптор группы томов</p> <p><strong># pvcreate /dev/sdb</strong></p> </div> <p>Если вы получили ошибку инициализации диска с таблицей разделов - проверьте, что работаете именно с нужным диском, и когда полностью будете уверены в том, что делаете, выполните следующие команды</p> <div class="admonition example"> <p class=admonition-title>Эти команды уничтожат таблицу разделов на целевом диске</p> <p><strong># dd if=/dev/zero of=/dev/diskname bs=1k count=1</strong> <strong># blockdev --rereadpt /dev/diskname</strong></p> </div> <ul> <li>Для разделов:</li> </ul> <p>Установите программой fdisk тип раздела в 0x8e.</p> <div class="admonition example"> <p class=admonition-title>Команда создаст в начале раздела <em>/dev/sdb1</em> дескриптор группы томов.</p> <p><strong># pvcreate /dev/sdb1</strong></p> </div> <h4 id=создание-группы-томов>Создание группы томов<a class=headerlink href=#создание-группы-томов title="Permanent link">&para;</a></h4> <p>Для создания группы томов используется команда <code>vgcreate</code></p> <div class="admonition example"> <p><strong># vgcreate vg00 /dev/sda1 /dev/sdb1</strong></p> </div> <div class="admonition note"> <p class=admonition-title>Замечание</p> <p>Если вы используете devfs важно указывать полное имя в devfs, а не ссылку в каталоге <code>/dev</code>. </p> </div> <div class="admonition example"> <p class=admonition-title>Таким образом приведенная команда должна выглядеть в системе с devfs так:</p> <p><strong># vgcreate vg00 /dev/ide/host0/bus0/target0/lun0/part1 /dev/ide/host0/bus0/target1/lun0/part1</strong></p> </div> <p>Кроме того, вы можете задать размер экстента при помощи ключа <code>-s</code>, если значение по умолчанию в 32Мб вас не устраивает. Можно, также, указать ограничения возможного количества физических и логических томов.</p> <h4 id=активация-группы-томов>Активация группы томов<a class=headerlink href=#активация-группы-томов title="Permanent link">&para;</a></h4> <p>После перезагрузки системы или выполнения команды <code>vgchange -an</code>, ваши группы томов и логические тома находятся в неактивном состоянии. Для их активации необходимо выполнить команду</p> <div class="admonition example"> <p><strong># vgchange -a y vg00</strong></p> </div> <h4 id=удаление-группы-томов>Удаление группы томов<a class=headerlink href=#удаление-группы-томов title="Permanent link">&para;</a></h4> <p>Убедитесь, что группа томов не содержит логических томов. Как это сделать, показано в следующих разделах.</p> <div class="admonition example"> <p class=admonition-title>Деактивируйте группу томов:</p> <p><strong># vgchange -a n vg00</strong></p> </div> <div class="admonition example"> <p class=admonition-title>Теперь можно удалить группу томов командой:</p> <p><strong># vgremove vg00</strong></p> </div> <h4 id=добавление-физических-томов-в-группу-томов>Добавление физических томов в группу томов<a class=headerlink href=#добавление-физических-томов-в-группу-томов title="Permanent link">&para;</a></h4> <p>Для добавления предварительно инициализированного физического тома в существующую группу томов используется команда <code>vgextend</code>:</p> <div class="admonition example"> <p class=admonition-title>новый физический том /dev/sdc1</p> <p><strong># vgextend vg00 /dev/sdc1</strong></p> </div> <h4 id=удаление-физических-томов-из-группы-томов>Удаление физических томов из группы томов<a class=headerlink href=#удаление-физических-томов-из-группы-томов title="Permanent link">&para;</a></h4> <p>Убедитесь, что физический том не используется никакими логическими томами. Для этого используйте команду <code>pvdisplay</code>:</p> <div class="admonition example"> <p><strong># pvdisplay /dev/sda1</strong> <div class="language-console highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=go>--- Physical volume ---</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=go>   PV Name            /dev/sda1</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=go>   VG Name            vg00</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=go>   PV Size            1.95 GB / NOT usable 4 MB [LVM: 122 KB]</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=go>   PV#                1</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=go>   PV Status          available</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=go>   Allocatable        yes (but full)</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=go>   Cur LV             1</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=go>   PE Size (KByte)    4096</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=go>   Total PE           499</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=go>   Free PE            0</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=go>   Allocated PE       499</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=go>   PV UUID            Sd44tK-9IRw-SrMC-MOkn-76iP-iftz-OVSen7</span>
</span></code></pre></div></p> </div> <p>Если же физический том используется, вам нужно будет перенести данные на другой физический том. Эта процедура будет описана в следующих разделах.</p> <p>После этого можно использовать <code>vgreduce</code> для удаления физических томов:</p> <div class="admonition example"> <p><strong># vgreduce vg00 /dev/sda1</strong></p> </div> <h4 id=создание-логического-тома>Создание логического тома<a class=headerlink href=#создание-логического-тома title="Permanent link">&para;</a></h4> <p>Для того, чтобы создать логический том <code>lv00</code>, размером 1500Мб, выполните команду:</p> <div class="admonition example"> <p><strong># lvcreate -L1500 -nlv00 vg00</strong></p> </div> <p>Для создания логического тома размером в 100 логических экстентов с расслоением по двум физическим томам и размером блока данных 4 KB:</p> <div class="admonition example"> <p><strong># lvcreate -i2 -I4 -l100 -nlv01 vg00</strong></p> </div> <p>Если вы хотите создать логический том, полностью занимающий группу томов, выполните команду <code>vgdisplay</code>, чтобы узнать полные размер группы томов, после чего используйте команду <code>lvcreate</code>.</p> <div class="admonition example"> <p><strong># vgdisplay vg00 | grep "Total PE"</strong><br> Total PE 10230<br> <strong># lvcreate -l 10230 vg00 -n lv02</strong> </p> </div> <p>Эти команды создают логический том <em>testvg</em>, полностью заполняющий группу томов.</p> <h4 id=удаление-логических-томов>Удаление логических томов<a class=headerlink href=#удаление-логических-томов title="Permanent link">&para;</a></h4> <p>Логический том должен быть размонтирован перед удалением:</p> <div class="admonition example"> <p><strong># umount /dev/vg00/home</strong><br> <strong># lvremove /dev/vg00/home</strong><br> <div class="language-console highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=go>lvremove -- do you really want to remove &quot;/dev/vg00/home&quot;? [y/n]:    y</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=go>lvremove -- doing automatic backup of volume group &quot;vg00&quot;</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=go>lvremove -- logical volume &quot;/dev/vg00/home&quot; successfully removed</span>
</span></code></pre></div></p> </div> <h4 id=увеличение-логических-томов>Увеличение логических томов<a class=headerlink href=#увеличение-логических-томов title="Permanent link">&para;</a></h4> <p>Для увеличения логического тома вам нужно просто указать команде lvextend до какого размера вы хотите увеличить том:</p> <div class="admonition example"> <p><strong># lvextend -L12G /dev/vg00/home</strong> <div class="language-console highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=go>lvextend -- extending logical volume &quot;/dev/vg00/home&quot; to 12 GB</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=go>lvextend -- doing automatic backup of volume group &quot;vg00&quot;</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=go>lvextend -- logical volume &quot;/dev/vg00/home&quot; successfully extended</span>
</span></code></pre></div></p> </div> <p>В результате <code>/dev/vg00/home</code> увеличится до 12Гбайт.</p> <div class="admonition example"> <p><strong># lvextend -L+1G /dev/vg00/home</strong> <div class="language-console highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=go>lvextend -- extending logical volume &quot;/dev/vg00/home&quot; to 13 GB</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=go>lvextend -- doing automatic backup of volume group &quot;vg00&quot;</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=go>lvextend -- logical volume &quot;/dev/vg00/home&quot; successfully extended</span>
</span></code></pre></div></p> </div> <p>Эта команда увеличивает размер логического тома на 1Гб.</p> <div class="admonition attention"> <p class=admonition-title>Внимание</p> <p>После того как вы увеличили логический том, необходимо соответственно увеличить размер файловой системы. Как это сделать зависит от типа используемой файловой системы.</p> </div> <h4 id=уменьшение-размера-логического-тома>Уменьшение размера логического тома<a class=headerlink href=#уменьшение-размера-логического-тома title="Permanent link">&para;</a></h4> <p>Логические тома могут быть уменьшены в размере, точно также как и увеличены. Однако очень важно помнить, что нужно в первую очередь уменьшить размер файловой системы, и только после этого уменьшать размер логического тома. Если вы нарушите последовательность, вы можете потерять данные.</p> <div class="admonition attention"> <p class=admonition-title>Внимание</p> <p>Уменьшить размер файловой системы XFS нельзя.</p> </div> <h4 id=перенос-данных-с-физического-тома>Перенос данных с физического тома<a class=headerlink href=#перенос-данных-с-физического-тома title="Permanent link">&para;</a></h4> <p>Для того, чтобы можно было удалить физический том из группы томов, необходимо освободить все занятые на нем физические экстенты. Это делается путем перераспределения занятых физических экстентов на другие физические тома. Следовательно, в группе томов должно быть достаточно свободных физических экстентов. Описание операции удаления физического тома приведено в разделе примеров.</p> <h4 id=перенос-группы-томов-на-другую-систему>Перенос группы томов на другую систему<a class=headerlink href=#перенос-группы-томов-на-другую-систему title="Permanent link">&para;</a></h4> <p>Физический перенос группы томов на другую систему организовывается при помощи команд <code>vgexport</code> и <code>vgimport</code>.</p> <p>Сперва необходимо размонтировать все логические тома группы томов и деактивировать группу:</p> <div class="admonition example"> <p><strong># unmount /mnt/design/users</strong><br> <strong># vgchange -an design</strong><br> <div class="language-console highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=go>vgchange -- volume group &quot;design&quot; successfully deactivated</span>
</span></code></pre></div></p> </div> <p>После этого экспортируем группу томов. Процедура экспорта запрещает доступ к группе на данной системе и готовит ее к удалению:</p> <div class="admonition example"> <p><strong># vgexport design</strong> <div class="language-console highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=go>vgexport -- volume group &quot;design&quot; sucessfully exported</span>
</span></code></pre></div></p> </div> <p>Теперь можно выключить машину, отсоединить диски, составляющие группу томов и подключить их к новой системе. Остается импортировать группу томов на новой машине и смонтировать логические тома:</p> <div class="admonition example"> <p><strong># pvscan</strong> <div class="language-console highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=go>pvscan -- reading all physical volumes (this may take a while...)</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=go>pvscan -- inactive PV &quot;/dev/sdb1&quot;  is in EXPORTED VG &quot;design&quot; [996 MB / 996 MB free]</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=go>pvscan -- inactive PV &quot;/dev/sdb2&quot;  is in EXPORTED VG &quot;design&quot; [996 MB / 244 MB free]</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=go>pvscan -- total: 2 [1.95 GB] / in use: 2 [1.95 GB] / in no VG: 0 [0]</span>
</span></code></pre></div> <strong># vgimport design /dev/sdb1 /dev/sdb2</strong> <div class="language-console highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=go>vgimport -- doing automatic backup of volume group &quot;design&quot;</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=go>vgimport -- volume group &quot;design&quot; successfully imported and activated</span>
</span></code></pre></div> <strong># mkdir -p /mnt/design/users</strong><br> <strong># mount /dev/design/users /mnt/design/users</strong> </p> </div> <p>Группа томов готова к использованию на новой системе.</p> <h3 id=111-разное>1.11 Разное<a class=headerlink href=#111-разное title="Permanent link">&para;</a></h3> <p>Отключение виртуальной памяти в macOS (для повторного включения выполните аналогичные команды). Это ускорит систему, но немного рискованно.</p> <div class="admonition example"> <p><strong># sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.dynamic_pager.plist</strong><br> <strong># sleep 3600; pmset sleepnow</strong> - перейти в режим ожидания через один час (macOS)<br> <strong># defaults write -g com.apple.mouse.scaling -float 8</strong> - ускорение мыши в macOS (используйте -1 для обратного эффекта) </p> </div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 17, 2024</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=index.html class="md-footer__link md-footer__link--prev" aria-label="Previous: Введение"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Введение </div> </div> </a> <a href=processes.html class="md-footer__link md-footer__link--next" aria-label="Next: Процессы"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Процессы </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; <a href=https://github.com/D34m0nN0n3>Dmitriy Prigoda</a>. </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["content.tabs.link", "navigation.footer", "navigation.indexes", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.integrate"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=assets/javascripts/bundle.83f73b43.min.js></script> <script src=assets/extra.js></script> <script src=assets/tex-mml-chtml.js></script> <script src=assets/tablesort.min.js></script> <script src=assets/tablesort.js></script> </body> </html>