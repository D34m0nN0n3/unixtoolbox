<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Сборником команд и задач (UnixToolbox)"><meta name=author content="Dmitriy Prigoda"><link rel=canonical href=https://D34m0nN0n3.github.io/unixtoolbox/processes.html><link rel=prev href=system.html><link rel=next href=file_system.html><link rel=icon href=assets/img/favicon/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.41"><title>Процессы - UnixToolbox</title><link rel=stylesheet href=assets/stylesheets/main.0253249f.min.css><link rel=stylesheet href=assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=assets/extra.css><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-BT11X31T69"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-BT11X31T69",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-BT11X31T69",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=red> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#2-процессы class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=index.html title=UnixToolbox class="md-header__button md-logo" aria-label=UnixToolbox data-md-component=logo> <img src=assets/img/logo/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> UnixToolbox </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Процессы </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/D34m0nN0n3/unixtoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> D34m0nN0n3/unixtoolbox </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title=UnixToolbox class="md-nav__button md-logo" aria-label=UnixToolbox data-md-component=logo> <img src=assets/img/logo/logo.svg alt=logo> </a> UnixToolbox </label> <div class=md-nav__source> <a href=https://github.com/D34m0nN0n3/unixtoolbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> D34m0nN0n3/unixtoolbox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=index.html class=md-nav__link> <span class=md-ellipsis> Введение </span> </a> </li> <li class=md-nav__item> <a href=system.html class=md-nav__link> <span class=md-ellipsis> Система </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Процессы </span> <span class="md-nav__icon md-icon"></span> </label> <a href=processes.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Процессы </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#2-процессы class=md-nav__link> <span class=md-ellipsis> 2 Процессы </span> </a> <nav class=md-nav aria-label="2 Процессы"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-список-и-pid-ы class=md-nav__link> <span class=md-ellipsis> 2.1 Список и PID-ы </span> </a> </li> <li class=md-nav__item> <a href=#22-приоритет class=md-nav__link> <span class=md-ellipsis> 2.2 Приоритет </span> </a> </li> <li class=md-nav__item> <a href=#23-фонпередний-план class=md-nav__link> <span class=md-ellipsis> 2.3 Фон/Передний план </span> </a> </li> <li class=md-nav__item> <a href=#24-top class=md-nav__link> <span class=md-ellipsis> 2.4 Top </span> </a> </li> <li class=md-nav__item> <a href=#25-сигналызавершение class=md-nav__link> <span class=md-ellipsis> 2.5 Сигналы/Завершение </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=file_system.html class=md-nav__link> <span class=md-ellipsis> Файловая система </span> </a> </li> <li class=md-nav__item> <a href=network.html class=md-nav__link> <span class=md-ellipsis> Сеть </span> </a> </li> <li class=md-nav__item> <a href=ssh_scp.html class=md-nav__link> <span class=md-ellipsis> SSH SCP </span> </a> </li> <li class=md-nav__item> <a href=vpn_with_ssh.html class=md-nav__link> <span class=md-ellipsis> VPN </span> </a> </li> <li class=md-nav__item> <a href=rsync.html class=md-nav__link> <span class=md-ellipsis> RSYNC </span> </a> </li> <li class=md-nav__item> <a href=sudo.html class=md-nav__link> <span class=md-ellipsis> SUDO </span> </a> </li> <li class=md-nav__item> <a href=encrypt_files.html class=md-nav__link> <span class=md-ellipsis> Шифрование файлов </span> </a> </li> <li class=md-nav__item> <a href=encrypt_partitions.html class=md-nav__link> <span class=md-ellipsis> Шифрование разделов </span> </a> </li> <li class=md-nav__item> <a href=ssl_certificates.html class=md-nav__link> <span class=md-ellipsis> Сертификаты SSL </span> </a> </li> <li class=md-nav__item> <a href=cvs.html class=md-nav__link> <span class=md-ellipsis> CVS </span> </a> </li> <li class=md-nav__item> <a href=svn.html class=md-nav__link> <span class=md-ellipsis> SVN </span> </a> </li> <li class=md-nav__item> <a href=git.html class=md-nav__link> <span class=md-ellipsis> GIT </span> </a> </li> <li class=md-nav__item> <a href=useful_commands.html class=md-nav__link> <span class=md-ellipsis> Полезные команды </span> </a> </li> <li class=md-nav__item> <a href=install_software.html class=md-nav__link> <span class=md-ellipsis> Установка программного обеспечения </span> </a> </li> <li class=md-nav__item> <a href=convert_media.html class=md-nav__link> <span class=md-ellipsis> Конвертирование медиафайлов </span> </a> </li> <li class=md-nav__item> <a href=printing.html class=md-nav__link> <span class=md-ellipsis> Печать </span> </a> </li> <li class=md-nav__item> <a href=database.html class=md-nav__link> <span class=md-ellipsis> Базы данных </span> </a> </li> <li class=md-nav__item> <a href=disk_quota.html class=md-nav__link> <span class=md-ellipsis> Квотирование диска </span> </a> </li> <li class=md-nav__item> <a href=shells.html class=md-nav__link> <span class=md-ellipsis> Терминальные оболочки </span> </a> </li> <li class=md-nav__item> <a href=scripting.html class=md-nav__link> <span class=md-ellipsis> Создание скриптов </span> </a> </li> <li class=md-nav__item> <a href=programming.html class=md-nav__link> <span class=md-ellipsis> Программирование </span> </a> </li> <li class=md-nav__item> <a href=configuration_management.html class=md-nav__link> <span class=md-ellipsis> Управление конфигурациями </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Процессы</h1> <h2 id=2-процессы>2 Процессы<a class=headerlink href=#2-процессы title="Permanent link">&para;</a></h2> <div class="admonition abstract"> <p><a href=#21-список-и-pid-ы>Список</a> | <a href=#22-приоритет>Приоритет</a> | <a href=#23-фонпередний-план>Фон/Передний план</a> | <a href=#24-top>Top</a> | <a href=#25-сигналызавершение>Сигналы/Завершение</a> </p> </div> <h3 id=21-список-и-pid-ы>2.1 Список и PID-ы<a class=headerlink href=#21-список-и-pid-ы title="Permanent link">&para;</a></h3> <p>Каждый процесс имеет уникальный номер - PID. Процессы создают иерархию в виде дерева. Самым "главным" предком, то есть процессом, стоящим на вершине этого дерева, является процесс init (PID=1). Список всех выполняемых процессов можно получить с помощью команды <code>ps</code>.</p> <div class="admonition example"> <p><strong># ps -auxefw</strong> - Расширенный список всех запущенных процессов</p> </div> <p>Однако более типичное использование происходит с использованием конвейера или с помощью pgrep (для установки <code>proctools</code> из MacPorts в ОС X):</p> <div class="admonition example"> <p><strong># ps axww | grep cron</strong> * 586 ?? Is 0:01.48 /usr/sbin/cron -s*<br> <strong># ps axjf</strong> - Все процессы в формате дерева (Linux)<br> <strong># ps aux | grep 'ss[h]'</strong> - Найти все PID процессов ssh без PID grep<br> <strong># pgrep -l sshd</strong> - Найти PID процессов по (части) имени<br> <strong># echo $$</strong> - PID вашей оболочки<br> <strong># fuser -va 22/tcp</strong> - Список процессов, использующих порт 22 (Linux)<br> <strong># pmap PID</strong> - Карта памяти процесса (поиск утечек памяти) (Linux)<br> <strong># fuser -va /home</strong> - Список процессов, обращающихся к разделу /home<br> <strong># strace df</strong> - Отслеживание системных вызовов и сигналов<br> <strong># truss df</strong> - то же самое на FreeBSD/Solaris/Unixware </p> </div> <div class="admonition info"> <p class=admonition-title>В колонке <strong>STAT</strong> может содержать следующие значения:</p> <ol> <li>R - (<em>RUNNING &amp; RUNNABLE</em>) процесс выполняется или готов к выполнению (состояние готовности) </li> <li>D - (<em>UNINTERRUPTABLE_SLEEP</em>) процесс в "беспробудном сне" - ожидает дискового ввода/вывода </li> <li>T - (<em>STOPPED</em>) процесс остановлен (stopped) или трассируется отладчиком </li> <li>S - (<em>INTERRRUPTABLE_SLEEP</em>) процесс в состоянии ожидания (sleeping) </li> <li>Z - (<em>ZOMBIE</em>) процесс-зобми </li> <li>&lt; - процесс с отрицательным значением nice </li> <li>N - процесс с положительным значением nice (о команде nice мы поговорим позже) </li> </ol> </div> <div class="admonition note"> <p class=admonition-title>RUNNING &amp; RUNNABLE</p> <p>Хотя <code>run</code> и <code>runable</code> обычно объединяют в одно целое, между ними есть небольшие различия. В большинстве случаев это различие не имеет значения, поскольку оно указывает на то, что процесс либо поставлен в очередь на выполнение, либо находится в процессе выполнения. Разница между запущенным и работоспособным заключается в том, что работающий процесс готов и настроен для запуска, но по какой-то причине ЦП не готов к его планированию. Поэтому он поставлен в очередь на запуск. Это может произойти, когда запланировано слишком много процессов, а процессорного времени недостаточно.</p> </div> <div class="admonition note"> <p class=admonition-title>UNINTERRUPTABLE_SLEEP</p> <p>Обычно в этом состоянии прерывание может вызвать некоторые серьезные проблемы. Процесс в этом состоянии встречается редко, но если это так, то обычно это происходит из-за системного вызова. Отличным примером является команда <code>mkdir</code>. Он выполняет системный вызов ядра и во время этого переходит в это состояние. Для локальных дисков это происходит мгновенно, за исключением крайних случаев. При использовании сетевой файловой системы, такой как NFS, возможно, что в этом состоянии она может зависать на неопределенный срок.</p> </div> <div class="admonition note"> <p class=admonition-title>STOPPED</p> <p>Многие приложения и консольные инструменты/приложения позволяют использовать ++ctrl+Z++ для приостановки процессов. В этом состоянии процесс приостановлен и не отвечает. Пример того, когда у вас может быть процесс в этом состоянии, — это когда у вас есть приложение переднего плана, запрашивающее пользовательский ввод, но вы еще не готовы его вводить. Вы можете использовать ++ctrl+Z++ и перейти к чему-то другому. Когда вы будете готовы вернуться к нему, вы можете запустить команду <code>fg</code>, чтобы вернуть его.</p> </div> <div class="admonition note"> <p class=admonition-title>INTERRRUPTABLE_SLEEP</p> <p>В ходе выполнения процесса он достигнет точки ожидания данных. Это может быть в форме ввода с терминала, например, запроса ввода данных у пользователя. В других случаях процессом может быть веб-сервер, который простаивает в ожидании запроса.<br> Пока оно ожидает этого, хорошо написанное приложение переходит в состояние INTERRUPTABLE_SLEEP. В этом состоянии процесс можно легко завершить без проблем. Переход в это состояние процесса во время ожидания ввода позволяет процессу отойти на второй план и дать другим процессам процессорное время.</p> </div> <div class="admonition note"> <p class=admonition-title>ZOMBIE</p> <p>Процессы в состоянии ZOMBIE могут показаться странными. Проще говоря, это промежуточное состояние после завершения процесса, но до того, как родительский процесс удалит его из таблицы процессов. Когда процесс завершается, родительский процесс несет ответственность за «пожинать плоды» дочернего процесса и очищать таблицу процессов.<br> Как правило, вы сталкиваетесь с процессами-зомби только в том случае, если родительский процесс не выполнил эту очистку и у вас есть процесс, который задерживается. Название, вероятно, происходит от аналогии с тем, что зомби не мертвы, они нежить.</p> </div> <h3 id=22-приоритет>2.2 Приоритет<a class=headerlink href=#22-приоритет title="Permanent link">&para;</a></h3> <p>Измените приоритет запущенного процесса с помощью команды renice. Отрицательные числа имеют более высокий приоритет, наименьшее значение - <code>-20</code>, а <code>nice</code> имеет положительное значение.</p> <div class="admonition example"> <p><strong># renice -5 586</strong> - Более сильный приоритет<br> <em>586: старый приоритет 0, новый приоритет -5</em> </p> </div> <p>Запустите процесс с определенным приоритетом с помощью команды <code>nice</code>. Положительное значение - "nice" или слабый приоритет планирования, отрицательное значение - сильный приоритет. Убедитесь, что вы знаете, используется ли <code>/usr/bin/nice</code> или встроенная оболочка (проверьте с помощью # <code>which nice</code>).</p> <div class="admonition example"> <p><strong># nice -n -5 top</strong> - Более сильный приоритет (<code>/usr/bin/nice</code>)<br> <strong># nice -n 5 top</strong> - Более слабый приоритет (<code>/usr/bin/nice</code>)<br> <strong># nice +5 top</strong> - Встроенная команда <code>nice</code> в <code>tcsh</code> (то же самое!) </p> </div> <p>В то время как <code>nice</code> изменяет планировщик ЦП, другая полезная команда <code>ionice</code> позволяет планировать ввод-вывод на диске. Это очень полезно для интенсивных приложений ввода-вывода (например, компиляции). Вы можете выбрать класс (простой - наилучший результат - реальное время), страница руководства короткая и хорошо объяснена.</p> <div class="admonition example"> <p><strong># ionice c3 -p123</strong> - установить класс простой для 'PID 123' (только Linux)<br> <strong># ionice -c2 -n0 firefox</strong> - Запустить Firefox с наилучшими усилиями и высоким приоритетом<br> <strong># ionice -c3 -p$$</strong> - Установить текущую оболочку с низким приоритетом </p> </div> <p>Последняя команда очень полезна для компиляции (или отладки) большого проекта. Каждая команда, запущенная из этой оболочки, будет иметь более низкий приоритет. $$ - это PID вашей оболочки (попробуйте <code>echo $$</code>). FreeBSD использует <code>idprio/rtprio</code> (0 = максимальный приоритет, 31 = наиболее свободный):</p> <div class="admonition example"> <p><strong># idprio 31 make</strong> - компилировать с наименьшим приоритетом<br> <strong># idprio 31 -1234</strong> - установить 'PID 1234' с наименьшим приоритетом<br> <strong># idprio -t -1234</strong> - '-t' удаляет любой реальный приоритет/приоритет простоя </p> </div> <h3 id=23-фонпередний-план>2.3 Фон/Передний план<a class=headerlink href=#23-фонпередний-план title="Permanent link">&para;</a></h3> <p>При запуске из оболочки процессы могут быть переведены в фоновый режим и вернуться в передний план с помощью <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span> <code>(^Z)</code>, bg и fg. Список процессов можно получить с помощью команды jobs. При необходимости отсоединитесь от терминала с помощью disown.</p> <div class="admonition example"> <p class=admonition-title>Пример 1</p> <p><strong># ping example.com &gt; ping.log</strong><br> <em>^Z</em> - ping приостановлен (остановлен) с помощью <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span><br> <strong># bg</strong> - перевести в фоновый режим и продолжить выполнение<br> <strong># jobs -l</strong> - Список процессов в фоновом режиме<br> [1] - 36232 Running ping example.com &gt; ping.log<br> [2] + 36233 Suspended (tty output) top<br> <strong># fg %2</strong> - Вернуть процесс 2 в передний план </p> </div> <div class="admonition example"> <p class=admonition-title>Пример 2</p> <p><strong># make</strong> - запустить длительную компиляцию, но нужно покинуть терминал<br> <em>^Z</em> - приостановлен (остановлен) с помощью <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span><br> <strong># bg</strong> - перевести в фоновый режим и продолжить выполнение<br> <strong># disown -h %1</strong> - отсоединить процесс от терминала, не будет завершен при выходе </p> </div> <p>Нет прямого способа повторно присоединить процесс к новому терминалу, попробуйте <code>reptyr</code> (Linux).</p> <p>Используйте nohup, чтобы запустить процесс, который должен продолжать работать при закрытии оболочки (устойчив к обрывам соединения).</p> <div class="admonition example"> <p><strong># nohup ping -i 60 &gt; ping.log &amp;</strong></p> </div> <h3 id=24-top>2.4 Top<a class=headerlink href=#24-top title="Permanent link">&para;</a></h3> <p>Программа top отображает информацию о запущенных процессах. См. также программу <code>hto</code>p с htop.sourceforge.net (более мощная версия <code>top</code>), которая работает в Linux и FreeBSD (<code>ports/sysutils/htop/</code>). Во время работы top нажмите клавишу <span class=keys><kbd class=key-h>H</kbd></span> для получения справочного обзора. Полезные клавиши:</p> <div class="admonition example"> <p><span class=keys><kbd class=key-u>U</kbd></span> <em>[имя пользователя]</em> Для отображения только процессов, принадлежащих пользователю. Используйте + или пробел, чтобы увидеть всех пользователей.<br> <span class=keys><kbd class=key-k>K</kbd></span> <em>[pid]</em> Завершить процесс с указанным <code>pid</code>.<br> <span class=keys><kbd class=key-1>1</kbd></span> Для отображения статистики всех процессоров (только Linux).<br> <span class=keys><kbd class=key-shift>Shift</kbd><span>+</span><kbd class=key-r>R</kbd></span> Переключение нормальной/обратной сортировки. </p> </div> <h3 id=25-сигналызавершение>2.5 Сигналы/Завершение<a class=headerlink href=#25-сигналызавершение title="Permanent link">&para;</a></h3> <p>Завершите или отправьте сигнал с помощью команды <code>kill</code> или <code>killall</code>.</p> <div class="admonition example"> <p><strong># ping -i 60 example.com &gt; ping.log &amp;</strong><br> <em>[1] 4712</em><br> <strong># kill -s TERM 4712</strong> - то же самое, что <em>kill -15 4712</em><br> <strong># killall -1 httpd</strong> - Завершить процессы HUP по точному имени<br> <strong># pkill -9 http</strong> - Завершить процессы TERM по (части) имени<br> <strong># pkill -TERM -u www</strong> - Завершить процессы TERM, принадлежащие пользователю www<br> <strong># fuser -k -TERM -m /home</strong> - Завершить все процессы, обращающиеся к /home (для отмонтирования) </p> </div> <div class="admonition info"> <p class=admonition-title>Важные сигналы:</p> <p>1 &nbsp; &nbsp; &nbsp; HUP (завершение соединения)<br> 2 &nbsp; &nbsp; &nbsp; INT (прерывание)<br> 3 &nbsp; &nbsp; &nbsp; QUIT (выход)<br> 9 &nbsp; &nbsp; &nbsp; KILL (неперехватываемое, невозможно игнорировать завершение)<br> 15 &nbsp; &nbsp; TERM (сигнал программного завершения) </p> </div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 17, 2024</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=system.html class="md-footer__link md-footer__link--prev" aria-label="Previous: Система"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Система </div> </div> </a> <a href=file_system.html class="md-footer__link md-footer__link--next" aria-label="Next: Файловая система"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Файловая система </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; <a href=https://github.com/D34m0nN0n3>Dmitriy Prigoda</a>. </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["content.tabs.link", "navigation.footer", "navigation.indexes", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.integrate"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=assets/javascripts/bundle.83f73b43.min.js></script> <script src=assets/extra.js></script> <script src=assets/tex-mml-chtml.js></script> <script src=assets/tablesort.min.js></script> <script src=assets/tablesort.js></script> </body> </html>